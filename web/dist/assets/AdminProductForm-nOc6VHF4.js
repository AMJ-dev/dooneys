import{p as os,aN as ms,E as ps,as as xs,F as hs,r as D,h as be,a6 as _,j as e,B as F,A as He,m as V,w as q,q as X,P as ke,aC as Ee,aD as Ve,aE as Be,aF as Le,v as M,X as Je,T as us,f as Me,g as Ze,J as $,C as gs,d as es,H as G,t as We}from"./index-DrzvgQSx.js";import{C as U,d as Q,a as Z,b as ee,c as ne}from"./card-CSdj4VlM.js";import{B as fs}from"./BarcodeScanner-BtlacBUn.js";import{L as y}from"./label-D6nqg-AK.js";import{T as js}from"./textarea-svmRLyU5.js";import{S as Ae}from"./switch-BNZbPRLI.js";import{S as he}from"./separator-DpYAwveS.js";import{P as qe}from"./progress-DNf4bHVP.js";import{L as we}from"./loader-circle-oXQTLidO.js";import{A as vs}from"./arrow-left-4JsjAwAx.js";import{S as Se}from"./save-BctxvPZE.js";import{P as ss}from"./pen-DBLRQO7X.js";import{I as ue}from"./info-Bi8M6cC4.js";import{C as ge}from"./camera-D3qhaZ7q.js";import{S as Ns}from"./scan-CVDoaV8-.js";import{D as _e}from"./dollar-sign-CiHtqMiF.js";import{T as Ke}from"./trophy-laTbxfMm.js";import{P as Ce}from"./palette-lbhenB7x.js";import{C as ce}from"./circle-check-big-Cc93Cm_Q.js";import{T as Re}from"./triangle-alert-BegDlvxd.js";import{S as ys}from"./scale-BT-ip_mF.js";import{R as bs}from"./ruler-B-RuB7cw.js";import{E as ws}from"./eye-DtInb1xn.js";import{L as ts}from"./layers-SY7Xsc3z.js";import{U as _s}from"./upload-DzFS-i39.js";import{T as Fe}from"./trash-2-DF_8SWob.js";import{P as le}from"./plus-CdXz1Jo6.js";import{G as Ge}from"./grip-vertical-B2cdzEI0.js";import{H as Xe}from"./hash-vuOsiX4R.js";import{S as Ye}from"./scissors-C0zi99Eo.js";import"./index-DDpYfoMH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rs=os("Package2",[["path",{d:"M3 9h18v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9Z",key:"1ront0"}],["path",{d:"m3 9 2.45-4.9A2 2 0 0 1 7.24 3h9.52a2 2 0 0 1 1.8 1.1L21 9",key:"19h2x1"}],["path",{d:"M12 3v6",key:"1holv5"}]]),ae=[{id:"basic",label:"Basic Info",icon:ke},{id:"variants",label:"Variants",icon:Ce},{id:"features",label:"Features",icon:ce},{id:"images",label:"Images",icon:ge},{id:"inventory",label:"Inventory",icon:Ze},{id:"shipping",label:"Shipping",icon:rs}],ks=({value:o,subCategoryValue:N,onChange:p,categories:P})=>{var j,m;const[k,T]=D.useState(!1),[v,b]=D.useState(!1),n=P.find(c=>c.id===o),u=((j=n==null?void 0:n.sub_categories)==null?void 0:j.filter(c=>c.status==="active"))||[],H=()=>o===null?"Select a category":(n==null?void 0:n.name)||"Select a category",s=()=>{if(N===null)return"Select a subcategory (optional)";const c=u.find(l=>l.id===N);return(c==null?void 0:c.name)||"Select a subcategory (optional)"};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-primary"}),"Category *"]}),e.jsxs("div",{className:"relative",children:[e.jsxs(F,{type:"button",variant:"outline",className:"w-full justify-between border-input hover:bg-accent/50",onClick:()=>T(!k),children:[e.jsx("span",{className:o?"":"text-muted-foreground",children:H()}),e.jsx(We,{className:"h-4 w-4 ml-2"})]}),k&&e.jsx("div",{className:"absolute z-50 mt-1 w-full bg-popover border rounded-md shadow-lg animate-in fade-in-0 zoom-in-95",children:e.jsx("div",{className:"p-2 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Categories"}),P.length>0?P.map(c=>e.jsxs("button",{type:"button",onClick:()=>{p(c.id,null),T(!1)},className:"w-full text-left px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground rounded-sm flex items-center justify-between transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:c.name}),c.sub_categories&&c.sub_categories.length>0&&e.jsxs($,{variant:"outline",className:"text-xs",children:[c.sub_categories.length," sub"]})]}),o===c.id&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]},`${c.id}-${X()}`)):e.jsx("div",{className:"px-2 py-1.5 text-sm text-muted-foreground italic",children:"No categories found"})]})})})]})]}),n&&u.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4 text-primary/70"}),"Sub Category",e.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:"(optional)"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(F,{type:"button",variant:"outline",className:"w-full justify-between border-input hover:bg-accent/50",onClick:()=>b(!v),children:[e.jsx("span",{className:N?"":"text-muted-foreground",children:s()}),e.jsx(We,{className:"h-4 w-4 ml-2"})]}),v&&e.jsx("div",{className:"absolute z-50 mt-1 w-full bg-popover border rounded-md shadow-lg animate-in fade-in-0 zoom-in-95",children:e.jsx("div",{className:"p-2 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"px-2 py-1 text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:["Subcategories for ",n.name]}),e.jsxs("button",{type:"button",onClick:()=>{p(n.id,null),b(!1)},className:"w-full text-left px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground rounded-sm flex items-center justify-between transition-colors",children:[e.jsx("span",{className:"text-muted-foreground",children:"None (Main Category)"}),N===null&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]}),e.jsx("div",{className:"my-1 border-t"}),u.map(c=>e.jsxs("button",{type:"button",onClick:()=>{p(n.id,c.id),b(!1)},className:"w-full text-left px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground rounded-sm flex items-center justify-between transition-colors",children:[e.jsx("span",{children:c.name}),N===c.id&&e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"})]},`${c.id}-${X()}`))]})})})]}),N&&e.jsx("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-1",children:e.jsxs($,{variant:"outline",className:"bg-primary/5 border-primary/20",children:[n.name," → ",(m=u.find(c=>c.id===N))==null?void 0:m.name]})})]}),n&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Products in category:"}),e.jsx("span",{className:"font-medium",children:n.product_count||0})]}),n.sub_categories&&e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsx("span",{children:"Available subcategories:"}),e.jsx("span",{className:"font-medium",children:n.sub_categories.length})]})]})]})},Ss=({images:o,onImagesChange:N,maxImages:p=5,isEditMode:P=!1,onImageDelete:k})=>{const T=D.useRef(null),[v,b]=D.useState(null),n=l=>{const w=Array.from(l.target.files||[]);if(o.filter(A=>!A.isRemoved).length+w.length>p){_.error(`You can only upload up to ${p} images`);return}const d=[],S=[];w.forEach(A=>{if(!A.type.startsWith("image/")){S.push(`${A.name} - Not an image file`);return}if(A.size>5*1024*1024){S.push(`${A.name} - Exceeds 5MB limit`);return}d.push(A)}),S.length>0&&_.error(`Invalid files: ${S.join(", ")}`),d.forEach(A=>{const K=new FileReader;K.onloadend=()=>{const O={id:-Date.now(),image:K.result,sort_order:o.filter(se=>!se.isRemoved).length};N([...o,O])},K.readAsDataURL(A)}),T.current&&(T.current.value="")},u=async l=>{const w=o[l];if(P&&w.id>0&&!w.isRemoved){b(w.id);try{k&&await k(w.id);const d=[...o];d[l]={...w,isRemoved:!0},N(d),_.success("Image deleted successfully")}catch{_.error("Failed to delete image")}finally{b(null)}}else{const d=[...o];d.splice(l,1),N(d)}},H=l=>{l.preventDefault(),l.stopPropagation()},s=l=>{if(l.preventDefault(),l.stopPropagation(),o.filter(S=>!S.isRemoved).length>=p){_.error(`You can only upload up to ${p} images`);return}const w=Array.from(l.dataTransfer.files),d=[];w.forEach(S=>{if(S.type.startsWith("image/")){if(S.size>5*1024*1024){_.error(`${S.name} exceeds 5MB limit`);return}o.filter(A=>!A.isRemoved).length+d.length<p&&d.push(S)}}),d.forEach(S=>{const A=new FileReader;A.onloadend=()=>{const K={id:-Date.now(),image:A.result,sort_order:o.filter(O=>!O.isRemoved).length};N([...o,K])},A.readAsDataURL(S)})},j=(l,w)=>{const d=o.filter(O=>!O.isRemoved),[S]=d.splice(l,1);d.splice(w,0,S);const A=d.map((O,se)=>({...O,sort_order:se})),K=o.filter(O=>O.isRemoved);N([...A,...K])},m=l=>l.image.startsWith("data:")?l.image:es(l.image),c=o.filter(l=>!l.isRemoved);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-base",children:"Product Images"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Upload up to ",p," images for your product"]})]}),e.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>{var l;return(l=T.current)==null?void 0:l.click()},disabled:c.length>=p,children:[e.jsx(_s,{className:"h-4 w-4 mr-2"}),"Upload Images"]})]}),e.jsx("input",{ref:T,type:"file",accept:"image/*",multiple:!0,onChange:n,className:"hidden"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{onDragOver:H,onDrop:s,onClick:()=>{var l;return(l=T.current)==null?void 0:l.click()},className:q("aspect-square rounded-lg border-2 border-dashed border-primary/20 bg-gradient-to-br from-primary/5 to-primary/0 flex flex-col items-center justify-center cursor-pointer transition-all hover:border-primary hover:bg-primary/10 group",c.length>=p&&"opacity-50 cursor-not-allowed"),children:[e.jsx(ge,{className:"h-10 w-10 text-primary/60 group-hover:text-primary mb-3 transition-colors"}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Drop images here"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"or click to browse"}),e.jsxs("p",{className:"text-xs text-primary font-medium mt-2",children:[p-c.length," slots remaining"]})]}),c.map((l,w)=>e.jsxs(V.div,{className:"relative aspect-square group",draggable:!0,onDragStart:d=>{d.dataTransfer.setData("text/plain",w.toString())},onDragOver:d=>{d.preventDefault(),d.currentTarget.classList.add("ring-2","ring-primary")},onDragLeave:d=>{d.currentTarget.classList.remove("ring-2","ring-primary")},onDrop:d=>{d.preventDefault(),d.currentTarget.classList.remove("ring-2","ring-primary");const S=parseInt(d.dataTransfer.getData("text/plain"));j(S,w)},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:w*.1},children:[e.jsx("img",{src:m(l),alt:`Product image ${w+1}`,className:"w-full h-full rounded-lg object-cover border shadow-sm cursor-move"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-end justify-center p-3",children:e.jsx(F,{variant:"destructive",size:"sm",onClick:d=>{d.stopPropagation(),u(o.indexOf(l))},disabled:v===l.id,className:"bg-red-600 hover:bg-red-700 shadow-lg",children:v===l.id?e.jsx(we,{className:"h-4 w-4 animate-spin"}):e.jsx(Fe,{className:"h-4 w-4"})})}),w===0&&e.jsxs($,{className:"absolute top-2 left-2 text-xs bg-primary shadow-md",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-white mr-1"}),"Main"]}),e.jsx($,{variant:"outline",className:"absolute top-2 right-2 text-xs bg-background/90 backdrop-blur-sm",children:w+1})]},`${l.id}-${X()}`)),Array.from({length:Math.max(0,p-c.length-1)}).map((l,w)=>e.jsx("div",{className:"aspect-square rounded-lg border-2 border-dashed border-muted-foreground/10 bg-gradient-to-br from-muted/5 to-transparent flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(le,{className:"h-8 w-8 text-muted-foreground/30 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-muted-foreground/50",children:"Available Slot"})]})},`${w}-${X()}`))]}),e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),e.jsxs("span",{className:"text-muted-foreground",children:[c.length," image",c.length!==1?"s":""," uploaded"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/30"}),e.jsxs("span",{className:"text-muted-foreground",children:[p-c.length," slot",p-c.length!==1?"s":""," available"]})]})]})})]})},Cs=({features:o,onFeaturesChange:N,isReadOnly:p=!1})=>{const[P,k]=D.useState(""),T=()=>{if(!P.trim()){_.error("Please enter a feature");return}const s={feature:P.trim(),sort_order:o.filter(j=>!j.isRemoved).length};N([...o,s]),k(""),_.success("Feature added successfully")},v=s=>{const j=o[s];if(j.id&&j.id>0){const m=[...o];m[s]={...j,isRemoved:!0},N(m)}else{const m=[...o];m.splice(s,1),N(m)}_.success("Feature removed")},b=(s,j)=>{if(p)return;const m=[...o];m[s]={...m[s],feature:j},N(m)},n=(s,j)=>{const m=o.filter(d=>!d.isRemoved),[c]=m.splice(s,1);m.splice(j,0,c);const l=m.map((d,S)=>({...d,sort_order:S})),w=o.filter(d=>d.isRemoved);N([...l,...w])},u=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),T())},H=o.filter(s=>!s.isRemoved);return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{className:"text-base",children:"Product Features"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Add key features of your product (e.g., "100% Virgin Hair", "24 Inches Length")'})]}),!p&&e.jsx(U,{className:"bg-gradient-to-r from-primary/5 to-primary/0 border-primary/20",children:e.jsx(Q,{className:"pt-6 space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"new-feature",children:"Add New Feature *"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"new-feature",value:P,onChange:s=>k(s.target.value),onKeyPress:u,placeholder:"e.g., 100% Virgin Brazilian Hair",disabled:p}),e.jsxs(F,{type:"button",onClick:T,disabled:!P.trim(),className:"gap-2",children:[e.jsx(le,{className:"h-4 w-4"}),"Add"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Press Enter to add, or click the Add button"})]})})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(y,{className:"text-sm font-medium",children:["Features (",H.length,")"]}),H.length>0&&e.jsx($,{variant:"outline",children:"Drag to reorder"})]}),H.length===0?e.jsx(U,{className:"border-dashed border-2",children:e.jsxs(Q,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ce,{className:"h-12 w-12 text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-muted-foreground text-center",children:"No features added yet. Add your first feature above."})]})}):e.jsx("div",{className:"space-y-3",children:H.map((s,j)=>e.jsx(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:j*.1},children:e.jsx(U,{className:q("group relative transition-all hover:shadow-md",!p&&"cursor-move"),draggable:!p,onDragStart:m=>{m.dataTransfer.setData("text/plain",j.toString())},onDragOver:m=>{m.preventDefault(),m.currentTarget.classList.add("ring-2","ring-primary")},onDragLeave:m=>{m.currentTarget.classList.remove("ring-2","ring-primary")},onDrop:m=>{m.preventDefault(),m.currentTarget.classList.remove("ring-2","ring-primary");const c=parseInt(m.dataTransfer.getData("text/plain"));n(c,j)},children:e.jsxs(Q,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[!p&&e.jsx("div",{className:"cursor-move text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(Ge,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1 min-w-0",children:p?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-foreground",children:s.feature})]}):e.jsx(M,{value:s.feature,onChange:m=>b(o.indexOf(s),m.target.value),className:"border-transparent hover:border-input focus:border-input",placeholder:"Enter feature"})}),!p&&e.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:()=>v(o.indexOf(s)),className:"opacity-0 group-hover:opacity-100 transition-opacity hover:bg-destructive/10 hover:text-destructive",children:e.jsx(Fe,{className:"h-4 w-4"})})]}),!p&&e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsxs($,{variant:"outline",className:"text-xs",children:["Position #",j+1]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),"Drag handle to reorder"]})]})]})})},`${s.id}-${X()}`))})]})]})})},Fs=({variants:o,onVariantsChange:N,basePrice:p="",isReadOnly:P=!1})=>{const[k,T]=D.useState(""),[v,b]=D.useState(""),[n,u]=D.useState(""),[H,s]=D.useState(!1),[j,m]=D.useState(""),[c,l]=D.useState(null),w=["Length","Color","Size","Texture","Density","Style"],d={Length:['10"','12"','14"','16"','18"','20"','22"','24"','26"','28"','30"'],Color:["Natural Black","Jet Black","Off Black","Dark Brown","Medium Brown","Light Brown","Burgundy","Blonde","Highlighted"],Size:["Small","Medium","Large","XL","XXL","One Size"],Texture:["Straight","Body Wave","Deep Wave","Loose Wave","Curly","Kinky"],Density:["130%","150%","180%","200%","250%"],Style:["Lace Front","Full Lace","360 Lace","Closure","Frontal"]},S=()=>{let i=v;if(H&&j.trim()&&(i=j.trim()),!k.trim()||!i.trim()){_.error("Please select both type and value");return}const x=n.trim()||"0";if(n&&isNaN(parseFloat(x))){_.error("Price modifier must be a valid number");return}const g=o.findIndex(f=>f.type===k&&!f.isRemoved);if(g>=0){const f=[...o],R={id:-Date.now(),value:i,sort_order:f[g].options.filter(z=>!z.isRemoved).length,price_modifier:x};f[g].options.push(R),N(f)}else{const f={id:-Date.now(),type:k.trim(),options:[{id:-Date.now(),value:i,sort_order:0,price_modifier:x}]};N([...o,f])}b(""),m(""),u(""),s(!1),_.success("Variant added successfully")},A=(i,x)=>{const g=o[i],f=g.options[x];if(f.id&&f.id>0){const R=[...o];R[i].options[x]={...f,isRemoved:!0},N(R)}else{const R=[...o];R[i].options.splice(x,1),R[i].options.filter(z=>!z.isRemoved).length===0&&(R[i]={...g,isRemoved:!0}),N(R)}_.success("Variant option removed")},K=i=>{const x=o[i];if(x.id&&x.id>0){const g=[...o];g[i]={...x,isRemoved:!0},N(g)}else{const g=[...o];g.splice(i,1),N(g)}_.success("Variant type removed")},O=(i,x)=>{if(P)return;const g=o[i].options[x];l({variantIndex:i,optionIndex:x}),b(g.value),u(g.price_modifier||"")},se=()=>{if(!c)return;const{variantIndex:i,optionIndex:x}=c;if(!v.trim()){_.error("Option value cannot be empty");return}const g=n.trim()||"0";if(n&&isNaN(parseFloat(g))){_.error("Price modifier must be a valid number");return}const f=[...o];f[i].options[x]={...f[i].options[x],value:v,price_modifier:g},N(f),l(null),b(""),u(""),_.success("Option updated successfully")},oe=()=>{l(null),b(""),u("")},Pe=(i,x,g)=>{if(P)return;const f=g.trim()||"0";if(g&&isNaN(parseFloat(f))){_.error("Price modifier must be a valid number");return}const R=[...o];R[i].options[x]={...R[i].options[x],price_modifier:f},N(R)},B=o.filter(i=>!i.isRemoved);return e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20 shadow-sm",children:e.jsx(Ce,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-2xl font-semibold tracking-tight text-foreground",children:"Product Variants"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add variants like Length, Color, Size, etc. with optional price adjustments"})]})]}),B.length>0&&e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-gradient-to-r from-primary/5 to-accent/5 border border-primary/15 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:[B.length," variant",B.length!==1?"s":""," added"]})]}),e.jsx("div",{className:"h-4 w-px bg-primary/20"}),e.jsxs($,{variant:"outline",className:"border-primary/20 bg-primary/5 text-xs",children:[e.jsx(Me,{className:"h-3 w-3 mr-1.5"}),"Price modifiers active"]})]})]}),!P&&e.jsx(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(U,{className:"overflow-hidden border-primary/20 bg-gradient-to-br from-background via-background to-primary/[0.02] shadow-soft",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/[0.02] via-transparent to-primary/[0.01] pointer-events-none"}),e.jsxs(Z,{className:"relative pb-2",children:[e.jsxs(ee,{className:"flex items-center gap-2 text-lg",children:[e.jsx(le,{className:"h-5 w-5 text-primary"}),"Add New Variant"]}),e.jsx(ne,{children:"Select a variant type and add options with optional price adjustments"})]}),e.jsx(Q,{className:"relative space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Xe,{className:"h-4 w-4 text-primary"}),"Variant Type *"]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Select a variant type from common options or use a custom type"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-2 mb-4",children:w.map((i,x)=>e.jsx(V.button,{type:"button",onClick:()=>T(i),className:q("px-3 py-2.5 rounded-lg border text-sm font-medium transition-all duration-200",k===i?"border-primary bg-gradient-to-br from-primary/10 to-primary/5 text-primary shadow-sm":"border-input/50 bg-gradient-to-b from-background to-primary/[0.02] text-foreground hover:border-primary/30 hover:bg-primary/5"),whileHover:{scale:1.02},whileTap:{scale:.98},children:i},`${x}-${X()}`))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Or enter custom type"}),e.jsx(M,{value:k,onChange:i=>T(i.target.value),placeholder:"e.g., Material, Finish, Pattern",className:"h-11 border-input/50 bg-gradient-to-b from-background to-primary/[0.02] focus:border-primary/50"})]})]}),e.jsx(he,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(Ye,{className:"h-4 w-4 text-primary"}),"Variant Options *"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add one or more options for this variant type"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{children:"Option Value *"}),e.jsx("div",{className:"space-y-2",children:k&&d[k]?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs text-muted-foreground mb-2",children:["Select from common ",k.toLowerCase()," options:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d[k].map((i,x)=>e.jsx(V.button,{type:"button",onClick:()=>{b(i),s(!1)},className:q("px-3 py-1.5 rounded-lg border text-sm transition-all",v===i?"border-primary bg-gradient-to-br from-primary/10 to-primary/5 text-primary":"border-input/30 bg-gradient-to-b from-background to-primary/[0.01] hover:border-primary/30 hover:bg-primary/5"),whileHover:{scale:1.05},whileTap:{scale:.95},children:i},`${x}-${X()}`))}),e.jsx("div",{className:"pt-2",children:e.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>{s(!0),b("")},className:"h-9 gap-1.5 border-primary/20 hover:border-primary/40 hover:bg-primary/5",children:[e.jsx(le,{className:"h-3.5 w-3.5"}),"Add Custom Value"]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Enter custom option values for ",k||"this variant"]}),e.jsx(M,{value:v,onChange:i=>b(i.target.value),placeholder:`e.g., Enter ${k?`${k.toLowerCase()} value`:"option value"}`,className:"h-11 border-input/50 bg-gradient-to-b from-background to-primary/[0.02] focus:border-primary/50"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4 text-primary"}),"Price Modifier",e.jsx(Ee,{children:e.jsxs(Ve,{children:[e.jsx(Be,{children:e.jsx(ue,{className:"h-3.5 w-3.5 text-muted-foreground hover:text-primary transition-colors"})}),e.jsx(Le,{className:"border-primary/10 bg-background shadow-elevated max-w-xs p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-sm",children:"Price Adjustment Guide"}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-primary/5",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary"}),e.jsx("span",{children:"+10 = Adds $10 to base price"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-green-500/5",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-green-500"}),e.jsx("span",{children:"-5 = $5 discount from base price"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-muted-foreground/5",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-muted-foreground"}),e.jsx("span",{children:"Empty = No price change"})]})]})]})})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(M,{value:n,onChange:i=>u(i.target.value),placeholder:"+10 or -5",className:"h-11 border-input/50 bg-gradient-to-b from-background to-primary/[0.02] focus:border-primary/50"}),p&&n&&!isNaN(parseFloat(n))&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{children:"Total: "}),e.jsx("span",{className:"font-medium text-primary",children:G(parseFloat(p)+parseFloat(n))}),e.jsxs("span",{className:"text-muted-foreground",children:[" (Base: ",G(parseFloat(p)),")"]})]})]})]})]}),H&&e.jsxs(V.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.2},className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Custom Value"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{value:j,onChange:i=>m(i.target.value),placeholder:`Enter custom ${k} value`,className:"h-11 flex-1 border-input/50 focus:border-primary/50",onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),S())}}),e.jsx(F,{type:"button",variant:"outline",onClick:()=>{s(!1),b(""),m("")},className:"h-11 px-3 border-input/50 hover:border-destructive/30 hover:bg-destructive/5 hover:text-destructive transition-colors",children:e.jsx(Je,{className:"h-4 w-4"})})]})]})]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(F,{type:"button",onClick:c?se:S,disabled:!k.trim()||!v.trim()&&!j.trim(),className:q("h-11 gap-2 px-6 rounded-lg transition-all duration-300",c?"bg-gradient-to-r from-primary to-primary/90 hover:from-primary hover:to-primary shadow-lg shadow-primary/25":"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 shadow-lg shadow-primary/20 hover:shadow-primary/30"),children:c?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Update Option"})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{children:"Add Variant Option"})]})})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"font-display text-xl font-semibold tracking-tight text-foreground",children:"Existing Variants"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your product variants and their price adjustments"})]}),B.length>0&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs($,{variant:"outline",className:"border-primary/20 bg-primary/5",children:["Total Options: ",B.reduce((i,x)=>i+x.options.filter(g=>!g.isRemoved).length,0)]})})]}),B.length===0?e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsx(U,{className:"border-dashed border-2 border-primary/20 bg-gradient-to-br from-primary/[0.02] to-transparent overflow-hidden group hover:border-primary/30 transition-colors",children:e.jsxs(Q,{className:"flex flex-col items-center justify-center py-16",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20",children:e.jsx(Ce,{className:"h-12 w-12 text-primary/30 group-hover:text-primary/40 transition-colors"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/20 to-transparent blur-xl opacity-0 group-hover:opacity-30 transition-opacity"})]}),e.jsx("h4",{className:"font-display text-lg font-medium mb-2 text-foreground",children:"No variants added yet"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md mb-6",children:"Start by adding variants like different lengths, colors, or sizes for your product. Each variant can have multiple options with individual price adjustments."}),!P&&e.jsxs(F,{variant:"outline",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"gap-2 border-primary/20 hover:border-primary/40 hover:bg-primary/5 transition-colors",children:[e.jsx(le,{className:"h-4 w-4"}),"Add Your First Variant"]})]})})}):e.jsx("div",{className:"space-y-6",children:B.map((i,x)=>{const g=i.options.filter(f=>!f.isRemoved);return e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:x*.1},className:"group",children:e.jsxs(U,{className:"overflow-hidden border-primary/20 bg-gradient-to-br from-background via-background to-primary/[0.02] shadow-soft hover:shadow-card-hover transition-all duration-300",children:[e.jsx(Z,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20",children:e.jsx(Xe,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-lg font-semibold",children:i.type}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-primary/50"}),e.jsxs("span",{children:[g.length," option",g.length!==1?"s":""]})]}),e.jsx("div",{className:"h-1 w-1 rounded-full bg-muted-foreground/30"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(_e,{className:"h-3.5 w-3.5 text-primary/70"}),e.jsxs("span",{children:[g.filter(f=>f.price_modifier&&f.price_modifier!=="0").length," with price adjustments"]})]})]})]})]}),!P&&e.jsx(F,{type:"button",variant:"ghost",size:"sm",onClick:()=>K(x),className:"h-9 w-9 p-0 hover:bg-destructive/10 hover:text-destructive opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(Fe,{className:"h-4 w-4"})})]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:g.map((f,R)=>{const z=(c==null?void 0:c.variantIndex)===x&&(c==null?void 0:c.optionIndex)===R,te=parseFloat(f.price_modifier||"0"),me=te!==0;return e.jsx(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.2,delay:R*.05},className:"group/option",children:e.jsx("div",{className:q("relative p-4 rounded-xl border transition-all duration-300 h-full",z?"border-primary/40 bg-gradient-to-br from-primary/5 via-primary/5 to-primary/[0.02] ring-2 ring-primary/20":"border-primary/10 bg-gradient-to-br from-background to-primary/[0.02] hover:border-primary/30 hover:bg-gradient-to-br hover:from-primary/5 hover:via-primary/2 hover:to-primary/[0.01]"),children:z?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Option Value"}),e.jsx(M,{value:v,onChange:ie=>b(ie.target.value),className:"h-10 border-primary/20 focus:border-primary/40",placeholder:"Option value",autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-sm font-medium",children:"Price Modifier"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{value:n,onChange:ie=>u(ie.target.value),placeholder:"+10 or -5",className:"h-10 border-primary/20 focus:border-primary/40"}),e.jsx(F,{type:"button",size:"sm",onClick:se,className:"h-10 px-3 bg-gradient-to-r from-primary to-primary/90 hover:from-primary hover:to-primary",children:e.jsx(Se,{className:"h-4 w-4"})})]}),p&&n&&!isNaN(parseFloat(n))&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",G(parseFloat(p)+parseFloat(n))]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:oe,className:"flex-1 h-9 border-input/50 hover:border-destructive/30 hover:bg-destructive/5 hover:text-destructive",children:"Cancel"})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-primary/60"}),e.jsx("span",{className:"font-medium text-foreground",children:f.value})]}),me&&e.jsxs("div",{className:q("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",te>0?"bg-gradient-to-r from-primary/10 to-primary/5 text-primary":"bg-gradient-to-r from-green-500/10 to-green-400/5 text-green-600"),children:[e.jsx(_e,{className:q("h-3 w-3",te>0?"text-primary":"text-green-600")}),e.jsxs("span",{children:[te>0?"+":"",te.toFixed(2)]})]})]}),!P&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover/option:opacity-100 transition-all",children:[e.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:()=>O(x,R),className:"h-7 w-7 hover:bg-primary/10 hover:text-primary",children:e.jsx(ss,{className:"h-3.5 w-3.5"})}),e.jsx(F,{type:"button",variant:"ghost",size:"icon",onClick:()=>A(x,R),className:"h-7 w-7 hover:bg-destructive/10 hover:text-destructive",children:e.jsx(Fe,{className:"h-3.5 w-3.5"})})]})]}),me&&p&&e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t border-primary/10",children:[e.jsx("span",{children:"Final price: "}),e.jsx("span",{className:"font-medium text-foreground",children:G(parseFloat(p)+te)})]}),!P&&e.jsxs("div",{className:"pt-3 border-t border-primary/10",children:[e.jsx(y,{className:"text-xs text-muted-foreground mb-1.5 block",children:"Quick price adjustment"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{value:f.price_modifier||"",onChange:ie=>Pe(x,R,ie.target.value),placeholder:"+10 or -5",className:"h-8 text-xs flex-1 border-primary/20 focus:border-primary/40"}),p&&f.price_modifier&&!isNaN(parseFloat(f.price_modifier))&&e.jsxs("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:["→ ",G(parseFloat(p)+parseFloat(f.price_modifier))]})]})]})]})})},`${f.id}-${X()}`)})}),!P&&e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>{T(i.type),b(""),u(""),window.scrollTo({top:200,behavior:"smooth"})},className:"h-9 gap-2 border-primary/20 hover:border-primary/40 hover:bg-primary/5",children:[e.jsx(le,{className:"h-3.5 w-3.5"}),"Add Another ",i.type," Option"]})})]})]})},`${i.id}-${X()}`)})})]}),B.length>0&&e.jsx(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:e.jsx(U,{className:"overflow-hidden border-primary/20 bg-gradient-to-br from-primary/5 via-primary/5 to-accent/5",children:e.jsx(Q,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-primary/10 to-primary/5 border border-primary/20",children:e.jsx(Ye,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Variant Summary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total options and price adjustments"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Variant Types"}),e.jsx("span",{className:"font-medium text-foreground",children:B.length})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Options"}),e.jsx("span",{className:"font-medium text-foreground",children:B.reduce((i,x)=>i+x.options.filter(g=>!g.isRemoved).length,0)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Options with Price Adjustments"}),e.jsx("span",{className:"font-medium text-primary",children:B.reduce((i,x)=>i+x.options.filter(g=>g.price_modifier&&g.price_modifier!=="0").length,0)})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Price Adjustment Guide"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-primary"}),e.jsx("span",{className:"text-foreground",children:"Positive (+)"}),e.jsx("span",{className:"text-muted-foreground",children:"Adds to base price"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500"}),e.jsx("span",{className:"text-foreground",children:"Negative (-)"}),e.jsx("span",{className:"text-muted-foreground",children:"Discount from base price"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:"Empty or 0"}),e.jsx("span",{className:"text-muted-foreground",children:"No price change"})]})]})]}),p&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Price Preview"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Base Price"}),e.jsx("span",{className:"font-medium",children:G(parseFloat(p))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"With Selected Modifiers"}),e.jsx("span",{className:"text-lg font-semibold text-primary",children:G(parseFloat(p)+B.filter(i=>!i.isRemoved).flatMap(i=>i.options.filter(x=>!x.isRemoved)).reduce((i,x)=>{const g=parseFloat(x.price_modifier||"0")||0;return i+g},0))})]}),e.jsx("div",{className:"pt-2",children:e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prices update based on selected variant options"})})]})]})]})})})})]})})},lt=()=>{var Ie,Ue;const{edit_product:o,add_product:N}=ms(["edit_product","add_product"]),{id:p,name:P}=ps(),[k]=xs(),T=hs(),v=!!p,b=k.get("view")==="true",n=b,[u,H]=D.useState(0),[s,j]=D.useState({name:"",description:"",category_id:null,sub_category_id:null,price:"",originalPrice:"",sku:"",weight:"",item_height:"",item_width:"",item_depth:"",status:"active",inStock:!0,stockQuantity:"0",lowStockAlert:"10",manage_stock:!0,isBestSeller:!1,isNew:!1}),[m,c]=D.useState([]),[l,w]=D.useState([]),[d,S]=D.useState([]),[A,K]=D.useState(!1),[O,se]=D.useState(!1),[oe,Pe]=D.useState([]),[B,i]=D.useState(!1),x=(u+1)/ae.length*100;D.useEffect(()=>{if(g(),v){if(!o){D.startTransition(()=>T("/unauthorized"));return}f()}else if(!N){D.startTransition(()=>T("/unauthorized"));return}},[p,v]);const g=async()=>{try{const r=(await be.get("/get-categories/")).data;r.error===!1&&r.data&&Array.isArray(r.data)?Pe(r.data):_.error("Failed to load categories")}catch(t){console.error("Error fetching categories:",t),_.error("Failed to load categories")}},f=async()=>{var t,r,E,I,Y,pe,xe,$e;K(!0);try{const ve=(await be.get(`/get-product/${p}/`)).data;if(ve.error===!1&&ve.data){const C=ve.data;j({id:C.id,name:C.name,description:C.description,category_id:C.category_id,category_name:C.category_name,sub_category_id:C.sub_category_id||null,sub_category:C.sub_category,price:((t=C.price)==null?void 0:t.toString())||"",originalPrice:((r=C.original_price)==null?void 0:r.toString())||"",sku:C.sku||"",weight:((E=C.weight)==null?void 0:E.toString())||"",item_height:((I=C.item_height)==null?void 0:I.toString())||"",item_width:((Y=C.item_width)==null?void 0:Y.toString())||"",item_depth:((pe=C.item_depth)==null?void 0:pe.toString())||"",status:C.status,inStock:!!C.in_stock,stockQuantity:((xe=C.stock_quantity)==null?void 0:xe.toString())||"0",lowStockAlert:(($e=C.low_stock_alert)==null?void 0:$e.toString())||"10",manage_stock:!!C.manage_stock,isBestSeller:C.is_best_seller=="1",isNew:C.is_new=="1"});const Te=(C.gallery||[]).map(a=>({id:a.id,image:a.image,sort_order:a.sort_order||0}));c(Te);const Qe=(C.features||[]).map(a=>({id:a.id,feature:a.feature,sort_order:a.sort_order||0}));w(Qe);const Ne=(C.variants||[]).map(a=>({id:a.id,type:a.type,options:(a.options||[]).map(h=>({id:h.id,value:h.value,sort_order:h.sort_order||0,price_modifier:h.price_modifier||"0"}))}));S(Ne)}else _.error("Failed to load product data")}catch(De){console.error("Error loading product data:",De),_.error("Failed to load product data")}finally{K(!1)}},R=async t=>{try{return await be.post("/delete-product-image/",{id:t}),!0}catch(r){throw console.error("Error deleting image:",r),r}},z=(t,r)=>{n||j(E=>({...E,[t]:r}))},te=(t,r)=>{n||j(E=>({...E,category_id:t,sub_category_id:r}))},me=()=>{u<ae.length-1&&H(u+1)},ie=()=>{u>0&&H(u-1)},ze=async()=>{const t=[];if(s.name.trim()||t.push("Product name is required"),s.category_id||t.push("Category is required"),s.price||t.push("Price is required"),m.filter(r=>!r.isRemoved).length===0&&t.push("At least one product image is required"),t.length>0){_.error(`Validation Error: ${t.join(", ")}`);return}se(!0);try{const r=new FormData;r.append("name",s.name),r.append("description",s.description),r.append("category_id",s.category_id.toString()),s.sub_category_id&&r.append("sub_category_id",s.sub_category_id.toString()),r.append("price",s.price),r.append("original_price",s.originalPrice||"0"),r.append("sku",s.sku),r.append("weight",s.weight),r.append("item_height",s.item_height),r.append("item_width",s.item_width),r.append("item_depth",s.item_depth),r.append("status",s.status),r.append("in_stock",s.inStock?"1":"0"),r.append("stock_quantity",s.stockQuantity||"0"),r.append("low_stock_alert",s.lowStockAlert||"10"),r.append("manage_stock","1"),r.append("is_best_seller",s.isBestSeller?"1":"0"),r.append("is_new",s.isNew?"1":"0"),v&&s.id&&r.append("id",s.id.toString()),m.filter(a=>!a.isRemoved&&a.id>0).forEach((a,h)=>{r.append(`existing_images[${h}][id]`,a.id.toString()),r.append(`existing_images[${h}][sort_order]`,a.sort_order.toString())}),m.filter(a=>!a.isRemoved&&a.id<0).forEach((a,h)=>{if(a.image.startsWith("data:")){const W=a.image.split(",")[1],re=atob(W),L=new Array(re.length);for(let ye=0;ye<re.length;ye++)L[ye]=re.charCodeAt(ye);const J=new Uint8Array(L),cs=new Blob([J],{type:"image/jpeg"});r.append(`new_images[${h}]`,cs,`image_${Date.now()}_${h}.jpg`)}}),m.filter(a=>a.isRemoved&&a.id>0).forEach((a,h)=>{r.append(`removed_images[${h}]`,a.id.toString())}),l.filter(a=>!a.isRemoved&&a.id&&a.id>0).forEach((a,h)=>{r.append(`existing_features[${h}][id]`,a.id.toString()),r.append(`existing_features[${h}][feature]`,a.feature),r.append(`existing_features[${h}][sort_order]`,a.sort_order.toString())}),l.filter(a=>!a.isRemoved&&!a.id).forEach((a,h)=>{r.append(`new_features[${h}][feature]`,a.feature),r.append(`new_features[${h}][sort_order]`,a.sort_order.toString())}),l.filter(a=>a.isRemoved&&a.id&&a.id>0).forEach((a,h)=>{r.append(`removed_features[${h}]`,a.id.toString())}),d.filter(a=>!a.isRemoved&&a.id&&a.id>0).forEach((a,h)=>{r.append(`existing_variants[${h}][id]`,a.id.toString()),r.append(`existing_variants[${h}][type]`,a.type),a.options.filter(L=>!L.isRemoved&&L.id&&L.id>0).forEach((L,J)=>{r.append(`existing_variants[${h}][options][${J}][id]`,L.id.toString()),r.append(`existing_variants[${h}][options][${J}][value]`,L.value),r.append(`existing_variants[${h}][options][${J}][sort_order]`,L.sort_order.toString()),r.append(`existing_variants[${h}][options][${J}][price_modifier]`,L.price_modifier||"0")}),a.options.filter(L=>!L.isRemoved&&(!L.id||L.id<=0)).forEach((L,J)=>{r.append(`existing_variants[${h}][new_options][${J}][value]`,L.value),r.append(`existing_variants[${h}][new_options][${J}][sort_order]`,L.sort_order.toString()),r.append(`existing_variants[${h}][new_options][${J}][price_modifier]`,L.price_modifier||"0")})}),d.filter(a=>!a.isRemoved&&(!a.id||a.id<=0)).forEach((a,h)=>{r.append(`new_variants[${h}][type]`,a.type),a.options.filter(W=>!W.isRemoved).forEach((W,re)=>{r.append(`new_variants[${h}][options][${re}][value]`,W.value),r.append(`new_variants[${h}][options][${re}][sort_order]`,W.sort_order.toString()),r.append(`new_variants[${h}][options][${re}][price_modifier]`,W.price_modifier||"0")})}),d.filter(a=>a.isRemoved&&a.id&&a.id>0).forEach((a,h)=>{r.append(`removed_variants[${h}]`,a.id.toString())}),d.forEach(a=>{a.options.filter(W=>W.isRemoved&&W.id&&W.id>0).forEach(W=>{r.append("removed_options[]",W.id.toString())})});const Te=v?"/update-product/":"/save-product/",Ne=(await be.post(Te,r,{headers:{"Content-Type":"multipart/form-data"}})).data;Ne.error===!1?(_.success(`${s.name} has been ${v?"updated":"created"} successfully.`),T("/admin/products")):_.error(Ne.data||`Failed to ${v?"update":"create"} product`)}catch(r){console.error("Error submitting product:",r),_.error(`Failed to ${v?"update":"create"} product`)}finally{se(!1)}},as=()=>{n||j(t=>({...t,inStock:!t.inStock}))},is=()=>{n||j(t=>({...t,isBestSeller:!t.isBestSeller}))},ns=()=>{n||j(t=>({...t,isNew:!t.isNew}))},ls=t=>{j(r=>({...r,sku:t})),_.success(`Barcode scanned: ${t}`,{icon:e.jsx(ce,{className:"h-5 w-5 text-white"}),autoClose:3e3}),setTimeout(()=>{i(!1)},2e3)},fe=parseInt(s.stockQuantity)||0,Oe=parseInt(s.lowStockAlert)||10,de=fe<=Oe,ds=fe>0?Math.min(fe/100*100,100):0,je=(()=>{const t=parseFloat(s.price)||0,r=d.filter(E=>!E.isRemoved).flatMap(E=>E.options.filter(I=>!I.isRemoved)).reduce((E,I)=>{const Y=parseFloat(I.price_modifier||"0")||0;return E+Y},0);return t+r})();return A&&v?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(we,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading product data..."})]})}):e.jsxs(e.Fragment,{children:[e.jsx(fs,{onScan:ls,enabled:B}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{variant:"ghost",size:"icon",onClick:()=>T("/admin/products"),className:"h-10 w-10",children:e.jsx(vs,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl mb-1",children:b?`View Product: ${s.name||P}`:v?`Edit Product: ${s.name||P}`:"Create New Product"}),e.jsx("p",{className:"text-muted-foreground",children:b?"View product details and images":v?"Update product details, images, and settings":"Add a new product to your catalog"})]})]}),!b&&e.jsx("div",{className:"flex items-center gap-3",children:u===ae.length-1?e.jsx(F,{onClick:ze,disabled:O,className:"gap-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-4 w-4 animate-spin"}),v?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4"}),v?"Update Product":"Create Product"]})}):e.jsxs(F,{onClick:me,className:"gap-2",children:["Next Step",e.jsx(He,{className:"h-4 w-4"})]})}),b&&e.jsxs(F,{onClick:()=>T(`/admin/products/${p}/${P}`),className:"gap-2",children:[e.jsx(ss,{className:"h-4 w-4"}),"Edit Product"]})]}),!b&&e.jsx(U,{className:"bg-gradient-to-r from-background to-primary/5 border-primary/10",children:e.jsx(Q,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-medium",children:["Step ",u+1," of ",ae.length]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(x),"% Complete"]})]}),e.jsx(qe,{value:x,className:"h-2"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-6 gap-4",children:ae.map((t,r)=>{const E=t.icon;return e.jsxs(V.button,{type:"button",onClick:()=>H(r),className:q("flex flex-col items-center justify-center p-4 rounded-lg transition-all",r===u?"bg-primary/10 border border-primary/20 shadow-sm":"hover:bg-accent/50"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(E,{className:q("h-5 w-5 mb-2",r===u?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:q("text-sm font-medium",r===u?"text-foreground":"text-muted-foreground"),children:t.label}),e.jsx("div",{className:q("h-1 w-8 rounded-full mt-2",r===u?"bg-primary":"bg-muted")})]},`${t.id}-${X()}`)})})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[u===0&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-primary"}),"Basic Information"]}),e.jsx(ne,{children:"Enter the essential details for your product"})]}),e.jsx(Q,{className:"space-y-6 pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"name",className:"flex items-center gap-2",children:["Product Name *",e.jsx(Ee,{children:e.jsxs(Ve,{children:[e.jsx(Be,{children:e.jsx(ue,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx(Le,{children:e.jsx("p",{children:"This is the name customers will see"})})]})})]}),e.jsx(M,{id:"name",value:s.name,onChange:t=>z("name",t.target.value),placeholder:"e.g., Luxury Brazilian Hair Bundle",disabled:n,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Description"}),e.jsx(js,{id:"description",value:s.description,onChange:t=>z("description",t.target.value),placeholder:"Describe your product features, benefits, and specifications...",rows:4,disabled:n})]}),e.jsx(ks,{value:s.category_id,subCategoryValue:s.sub_category_id,onChange:te,categories:oe}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(y,{htmlFor:"sku",children:"SKU"}),!n&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"sku",value:s.sku,onChange:t=>z("sku",t.target.value),placeholder:"e.g., DON-000001",className:"font-mono",disabled:n||B}),e.jsx(F,{type:"button",variant:B?"destructive":"outline",onClick:()=>{B?i(!1):(i(!0),_.info("Ready to scan. Point camera at barcode...",{autoClose:3e3}))},className:"gap-2",disabled:O,children:B?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"h-4 w-4 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-full animate-ping opacity-75"})]}),e.jsxs("span",{className:"relative",children:["Scanning...",e.jsx("span",{className:"absolute -top-1 -right-2 h-2 w-2 bg-red-500 rounded-full animate-pulse"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsx("span",{children:"Scan Barcode"})]})})]}),B&&e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm",onClick:()=>i(!1),children:e.jsxs("div",{className:"relative",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"relative w-64 h-64 md:w-80 md:h-80",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-primary/20 rounded-2xl"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-primary to-transparent animate-[scan_2s_linear_infinite]"}),e.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-primary"}),e.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-primary"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-primary"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-primary"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-32 h-32 border-2 border-primary/40 rounded-full animate-pulse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full animate-ping"})})]})}),e.jsx("div",{className:"absolute -bottom-16 left-0 right-0 text-center",children:e.jsxs(V.div,{animate:{y:[0,-5,0]},transition:{duration:1.5,repeat:1/0},className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-primary animate-pulse"}),e.jsx("h3",{className:"text-xl font-display font-semibold text-white",children:"Scanning..."})]}),e.jsx("p",{className:"text-sm text-primary/80",children:"Point camera at barcode"}),e.jsxs("div",{className:"flex items-center justify-center gap-1.5 text-xs text-white/60",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full animate-pulse"}),e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full animate-pulse delay-150"}),e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full animate-pulse delay-300"}),e.jsx("span",{className:"ml-2",children:"Looking for barcode"})]})]})})]}),e.jsxs(V.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"mt-12 bg-black/40 backdrop-blur-md rounded-xl p-6 max-w-md mx-auto border border-white/10",children:[e.jsxs("h4",{className:"font-display font-medium text-white mb-3 flex items-center gap-2",children:[e.jsx(ue,{className:"h-4 w-4 text-primary"}),"Scanning Tips"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-white/70",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full mt-1.5"}),"Ensure good lighting on the barcode"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full mt-1.5"}),"Hold camera steady for 2-3 seconds"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full mt-1.5"}),"Keep barcode within the scanning frame"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"h-1.5 w-1.5 bg-primary rounded-full mt-1.5"}),"Scan will auto-populate SKU field"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:e.jsxs(F,{onClick:()=>i(!1),variant:"destructive",size:"sm",className:"w-full gap-2",children:[e.jsx(Je,{className:"h-4 w-4"}),"Stop Scanning"]})})]})]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"price",className:"flex items-center gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"Base Price *"]}),e.jsx(M,{id:"price",type:"number",value:s.price,onChange:t=>z("price",t.target.value),placeholder:"0.00",min:"0",step:"0.01",disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"originalPrice",className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4"}),"Original Price"]}),e.jsx(M,{id:"originalPrice",type:"number",value:s.originalPrice,onChange:t=>z("originalPrice",t.target.value),placeholder:"0.00",min:"0",step:"0.01",disabled:n})]})]}),e.jsx(he,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4 text-amber-500"}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"bestSeller",children:"Best Seller"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this product as a best seller"})]})]}),e.jsx(Ae,{id:"bestSeller",checked:s.isBestSeller,onCheckedChange:is,disabled:n})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"newProduct",children:"New Arrival"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Mark this product as new"})]})]}),e.jsx(Ae,{id:"newProduct",checked:s.isNew,onCheckedChange:ns,disabled:n})]})]})]})})]})}),u===1&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"h-5 w-5 text-primary"}),"Product Variants"]}),e.jsx(ne,{children:"Add variants like Length, Color, Size, etc. with optional price adjustments"})]}),e.jsx(Q,{className:"pt-6",children:e.jsx(Fs,{variants:d,onVariantsChange:S,basePrice:s.price,isReadOnly:n})})]})}),u===2&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5 text-primary"}),"Product Features"]}),e.jsx(ne,{children:"Add key features of your product"})]}),e.jsx(Q,{className:"pt-6",children:e.jsx(Cs,{features:l,onFeaturesChange:w,isReadOnly:n})})]})}),u===3&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-primary"}),"Product Images"]}),e.jsx(ne,{children:"Upload high-quality images to showcase your product"})]}),e.jsx(Q,{className:"pt-6",children:e.jsx(Ss,{images:m,onImagesChange:c,maxImages:5,isEditMode:v,onImageDelete:R})})]})}),u===4&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"h-5 w-5 text-primary"}),"Inventory Management"]}),e.jsx(ne,{children:"Configure stock levels and alerts"})]}),e.jsx(Q,{className:"space-y-6 pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"stockQuantity",children:"Current Stock *"}),e.jsx(M,{id:"stockQuantity",type:"number",value:s.stockQuantity,onChange:t=>z("stockQuantity",t.target.value),placeholder:"e.g., 100",min:"0",disabled:n})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"lowStockAlert",className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-amber-500"}),"Low Stock Alert",e.jsx(Ee,{children:e.jsxs(Ve,{children:[e.jsx(Be,{children:e.jsx(ue,{className:"h-3 w-3 text-muted-foreground"})}),e.jsx(Le,{children:e.jsx("p",{className:"max-w-xs",children:"Get notified when stock falls below this level. Helps prevent stockouts."})})]})})]}),e.jsx(M,{id:"lowStockAlert",type:"number",value:s.lowStockAlert,onChange:t=>z("lowStockAlert",t.target.value),placeholder:"e.g., 10",min:"0",disabled:n}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Alert when stock ≤ ",s.lowStockAlert||10]})]})]}),s.stockQuantity&&e.jsxs("div",{className:"space-y-3 p-4 rounded-lg border bg-gradient-to-r from-background to-primary/5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{className:"text-sm font-medium",children:"Stock Status"}),e.jsx($,{variant:de?"destructive":"default",className:"gap-1",children:de?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-3 w-3"}),"Low Stock"]}):"In Stock"})]}),e.jsx(qe,{value:ds,className:q("h-2",de?"bg-destructive/20":"bg-primary/20")}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Current: ",fe," units"]}),e.jsxs("div",{className:q("font-medium",de?"text-destructive":"text-primary"),children:["Alert at: ",Oe," units"]})]}),de&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive mt-2",children:[e.jsx(Re,{className:"h-4 w-4"}),e.jsx("span",{children:"Stock is running low! Consider restocking soon."})]})]}),e.jsx(he,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"status",children:"Product Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.inStock?"Product is visible to customers":"Product is hidden from customers"})]}),e.jsx(Ae,{id:"status",checked:s.inStock,onCheckedChange:as,disabled:n})]})]})})]})}),u===5&&e.jsx(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:e.jsxs(U,{children:[e.jsxs(Z,{className:"bg-gradient-to-r from-primary/5 to-primary/0",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"h-5 w-5 text-primary"}),"Shipping & Dimensions"]}),e.jsx(ne,{children:"Product specifications for shipping calculations"})]}),e.jsx(Q,{className:"space-y-6 pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(y,{htmlFor:"weight",className:"flex items-center gap-2",children:[e.jsx(ys,{className:"h-4 w-4"}),"Weight (kg)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"weight",type:"number",value:s.weight,onChange:t=>z("weight",t.target.value),placeholder:"e.g., 0.2",min:"0",step:"0.001",disabled:n}),e.jsx("div",{className:"flex items-center px-3 border rounded-lg bg-muted text-sm",children:"kg"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter weight in kilograms (1 kg = 1000 grams)"})]}),e.jsx(he,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-primary"}),e.jsx("h4",{className:"font-medium",children:"Dimensions (cm)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"item_height",children:"Height"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"item_height",type:"number",value:s.item_height,onChange:t=>z("item_height",t.target.value),placeholder:"e.g., 24",min:"0",step:"0.1",disabled:n}),e.jsx("div",{className:"flex items-center px-3 border rounded-lg bg-muted text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"item_width",children:"Width"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"item_width",type:"number",value:s.item_width,onChange:t=>z("item_width",t.target.value),placeholder:"e.g., 8",min:"0",step:"0.1",disabled:n}),e.jsx("div",{className:"flex items-center px-3 border rounded-lg bg-muted text-sm",children:"cm"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"item_depth",children:"Depth"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:"item_depth",type:"number",value:s.item_depth,onChange:t=>z("item_depth",t.target.value),placeholder:"e.g., 2",min:"0",step:"0.1",disabled:n}),e.jsx("div",{className:"flex items-center px-3 border rounded-lg bg-muted text-sm",children:"cm"})]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-gradient-to-r from-background to-primary/5",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Dimension Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Dimensions:"}),e.jsxs("span",{className:"font-medium",children:[s.item_height||"?"," × ",s.item_width||"?"," × ",s.item_depth||"?"," cm"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"}),e.jsxs("span",{className:"font-medium",children:[s.weight||"?"," kg"]})]}),s.item_height&&s.item_width&&s.item_depth&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume:"}),e.jsxs("span",{className:"font-medium",children:[(parseFloat(s.item_height)*parseFloat(s.item_width)*parseFloat(s.item_depth)).toFixed(2)," cm³"]})]})]})]})]}),e.jsx("div",{className:"p-4 rounded-lg border bg-gradient-to-r from-blue-50 to-blue-100",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ue,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Shipping Calculation Info"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"These dimensions and weight are used to calculate shipping costs. Accurate measurements ensure correct shipping rates for customers."})]})]})})]})})]})}),!b&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs(F,{variant:"outline",onClick:ie,disabled:u===0,className:"gap-2",children:[e.jsx(gs,{className:"h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Step ",u+1," of ",ae.length]}),e.jsx(F,{onClick:u===ae.length-1?ze:me,disabled:O,className:"gap-2",children:u===ae.length-1?O?e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"h-4 w-4 animate-spin"}),v?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4"}),v?"Update Product":"Create Product"]}):e.jsxs(e.Fragment,{children:["Next",e.jsx(He,{className:"h-4 w-4"})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(U,{children:[e.jsx(Z,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ws,{className:"h-5 w-5 text-primary"}),"Product Preview"]})}),e.jsxs(Q,{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gradient-to-br from-primary/5 to-primary/0 border",children:m.filter(t=>!t.isRemoved).length>0?e.jsx("img",{src:es((Ie=m.filter(t=>!t.isRemoved)[0])==null?void 0:Ie.image),alt:"Product preview",className:"w-full h-full object-cover",onError:t=>{t.currentTarget.src="/placeholder-product.jpg"}}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center p-6",children:[e.jsx(ke,{className:"h-12 w-12 text-primary/30 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No preview available"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold truncate",children:s.name||"Product Name"}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:s.description||"Product description will appear here"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),e.jsxs("div",{className:"text-right",children:[e.jsx($,{variant:"outline",children:((Ue=oe.find(t=>t.id===s.category_id))==null?void 0:Ue.name)||"Uncategorized"}),s.sub_category_id&&e.jsx("div",{className:"mt-1",children:e.jsxs($,{variant:"outline",className:"bg-primary/5 border-primary/20 text-xs",children:[e.jsx(ts,{className:"h-3 w-3 mr-1"}),(()=>{var r,E;const t=oe.find(I=>I.id===s.category_id);return(E=(r=t==null?void 0:t.sub_categories)==null?void 0:r.find(I=>I.id===s.sub_category_id))==null?void 0:E.name})()]})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Price:"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-semibold text-lg",children:G(je)}),je!==parseFloat(s.price||"0")&&e.jsxs($,{variant:"outline",className:"text-xs h-5",children:[je>parseFloat(s.price||"0")?"+":"",G(Math.abs(je-parseFloat(s.price||"0")))]})]}),e.jsxs("div",{className:"space-y-1",children:[s.originalPrice&&parseFloat(s.originalPrice)>0&&e.jsx("span",{className:"text-sm text-muted-foreground line-through",children:G(parseFloat(s.originalPrice))}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Base: ",s.price?G(parseFloat(s.price)):"0.00"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Status:"}),e.jsx($,{variant:s.inStock?"default":"secondary",children:s.inStock?"In Stock":"Out of Stock"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.isBestSeller&&e.jsxs($,{variant:"default",className:"bg-amber-500 hover:bg-amber-600 gap-1",children:[e.jsx(Ke,{className:"h-3 w-3"}),"Best Seller"]}),s.isNew&&e.jsxs($,{variant:"default",className:"bg-blue-500 hover:bg-blue-600 gap-1",children:[e.jsx(Me,{className:"h-3 w-3"}),"New"]})]}),d.filter(t=>!t.isRemoved).length>0&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Available Variants:"}),e.jsxs("div",{className:"space-y-2",children:[d.filter(t=>!t.isRemoved).slice(0,2).map(t=>{const r=t.options.filter(I=>!I.isRemoved),E=r.slice(0,2).map(I=>{const Y=parseFloat(I.price_modifier||"0"),pe=Y>0?"+":Y<0?"-":"",xe=Y!==0?` (${pe}${G(Math.abs(Y))})`:"";return`${I.value}${xe}`}).join(", ");return e.jsxs("div",{className:"text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[t.type,": "]}),e.jsx("span",{className:"font-medium",children:E}),r.length>2&&e.jsxs("span",{className:"text-muted-foreground text-xs",children:[" ","+",r.length-2," more"]})]},`${t.id}-${X()}`)}),d.filter(t=>!t.isRemoved).length>2&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",d.filter(t=>!t.isRemoved).length-2," more variant types"]})]})]}),s.stockQuantity&&parseInt(s.stockQuantity)>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Stock Level:"}),e.jsxs($,{variant:de?"destructive":"default",className:"gap-1",children:[s.stockQuantity," units"]})]}),(s.weight||s.item_height||s.item_width||s.item_depth)&&e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Shipping Info:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[s.weight&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Weight:"}),e.jsxs("span",{className:"font-medium",children:[s.weight," kg"]})]}),(s.item_height||s.item_width||s.item_depth)&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Dimensions:"}),e.jsxs("span",{className:"font-medium",children:[s.item_height||"?"," × ",s.item_width||"?"," × ",s.item_depth||"?"," cm"]})]})]})]})]}),l.filter(t=>!t.isRemoved).length>0&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Key Features:"}),e.jsxs("div",{className:"space-y-1",children:[l.filter(t=>!t.isRemoved).slice(0,3).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ce,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-foreground",children:t.feature})]},`${r}-${X()}`)),l.filter(t=>!t.isRemoved).length>3&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",l.filter(t=>!t.isRemoved).length-3," more features"]})]})]})]})]})]}),!b&&e.jsxs(U,{children:[e.jsx(Z,{children:e.jsx(ee,{children:"Completion Checklist"})}),e.jsxs(Q,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Basic Information"}),e.jsx($,{variant:s.name&&s.category_id&&s.price?"default":"secondary",children:s.name&&s.category_id&&s.price?"✓":"—"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Sub Category"}),e.jsx($,{variant:s.sub_category_id?"default":"secondary",children:s.sub_category_id?"✓":"Optional"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Variants"}),e.jsxs($,{variant:d.filter(t=>!t.isRemoved).length>0?"default":"secondary",children:[d.filter(t=>!t.isRemoved).length," added"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Features"}),e.jsxs($,{variant:l.filter(t=>!t.isRemoved).length>0?"default":"secondary",children:[l.filter(t=>!t.isRemoved).length," added"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Images Uploaded"}),e.jsxs($,{variant:m.filter(t=>!t.isRemoved).length>0?"default":"secondary",children:[m.filter(t=>!t.isRemoved).length," / 5"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Stock Information"}),e.jsx($,{variant:s.stockQuantity&&parseInt(s.stockQuantity)>0?"default":"secondary",children:s.stockQuantity&&parseInt(s.stockQuantity)>0?"✓":"—"})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping Details"}),e.jsx($,{variant:s.weight?"default":"secondary",children:s.weight?"✓":"—"})]})]})]})]})]})]})]})};export{lt as default};
