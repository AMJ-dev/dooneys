import{aN as V,E as W,F as X,r as c,h as w,a6 as h,j as e,m as t,B as b,a4 as L,v as g,w as l,D as j,a5 as Y,k as Z,N as P,f as ee}from"./index-DrzvgQSx.js";import{L as v}from"./label-D6nqg-AK.js";import{C as y,a as R,b as D,c as $,d as N}from"./card-CSdj4VlM.js";import{S as ae}from"./separator-DpYAwveS.js";import{A as se}from"./arrow-left-4JsjAwAx.js";import{L as re}from"./loader-circle-oXQTLidO.js";import{S as te}from"./save-BctxvPZE.js";const T={first_name:"",last_name:"",email:"",mobile_number:"",role_id:""},xe=()=>{var S,F;const{edit_staff:q,add_staff:M}=V(["edit_staff","add_staff"]),{id:p}=W(),x=X(),n=!!p,[s,m]=c.useState(T),[U,_]=c.useState(!1),[k,C]=c.useState(!1),[d,u]=c.useState({}),[f,z]=c.useState([]);c.useEffect(()=>{if(I(),n){if(!q){c.startTransition(()=>x("/unauthorized"));return}B()}else if(!M){c.startTransition(()=>x("/unauthorized"));return}},[p]);const B=async()=>{try{_(!0);const r=(await w.get(`/get-user/${p}/`)).data;if(!r.error&&r.data){const i=r.data,o=(i.name||"").split(" ");m({first_name:o[0]||"",last_name:o.slice(1).join(" ")||"",email:i.email||"",mobile_number:i.mobile_number||"",role_id:i.role_id||""})}else h.error("Failed to load staff data"),x("/admin/staffs")}catch(a){console.error("Error fetching staff data:",a),h.error("Failed to load staff data"),x("/admin/staffs")}finally{_(!1)}},I=async()=>{try{const r=(await w.get("/get-permissions/")).data;!r.error&&r.data&&Array.isArray(r.data)&&z(r.data)}catch(a){console.error("Error fetching roles:",a),h.error("Failed to load role data")}},H=()=>{const a={};return s.first_name.trim()||(a.first_name="First name is required"),s.last_name.trim()||(a.last_name="Last name is required"),s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(a.email="Please enter a valid email address"):a.email="Email address is required",s.mobile_number.trim()||(a.mobile_number="Phone number is required"),u(a),Object.keys(a).length===0},O=async()=>{if(!H()){h.error("Please check the form for errors");return}try{C(!0);const a=`${s.first_name} ${s.last_name}`.trim(),r=f.find(K=>K.id===s.role_id),i={first_name:s.first_name,last_name:s.last_name,email:s.email,mobile_number:s.mobile_number,role_id:s.role_id||void 0,...n&&{id:p}},o=n?"/update-staff/":"/add-user/",A=(await w.post(o,i)).data;A.error?h.error(A.data||"Operation failed"):(h.success(`${a} has been ${n?"updated":"added"}.`),setTimeout(()=>{x("/admin/staffs")},1200))}catch(a){console.error("Error submitting form:",a),h.error("An unexpected error occurred")}finally{C(!1)}},Q=()=>`${s.first_name} ${s.last_name}`.trim(),G=a=>a.split(" ").map(r=>r[0]).join("").toUpperCase().slice(0,2),J=a=>{const r=[{gradient:"from-blue-500/10 via-blue-600/5 to-blue-500/10",border:"border-blue-300/30",text:"text-blue-600",bg:"bg-blue-500/10"},{gradient:"from-emerald-500/10 via-emerald-600/5 to-emerald-500/10",border:"border-emerald-300/30",text:"text-emerald-600",bg:"bg-emerald-500/10"},{gradient:"from-amber-500/10 via-amber-600/5 to-amber-500/10",border:"border-amber-300/30",text:"text-amber-600",bg:"bg-amber-500/10"},{gradient:"from-rose-500/10 via-rose-600/5 to-rose-500/10",border:"border-rose-300/30",text:"text-rose-600",bg:"bg-rose-500/10"},{gradient:"from-purple-500/10 via-purple-600/5 to-purple-500/10",border:"border-purple-300/30",text:"text-purple-600",bg:"bg-purple-500/10"},{gradient:"from-cyan-500/10 via-cyan-600/5 to-cyan-500/10",border:"border-cyan-300/30",text:"text-cyan-600",bg:"bg-cyan-500/10"}];return r[a%r.length]};return U?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-warm",children:e.jsxs(t.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center space-y-6",children:[e.jsxs("div",{className:"relative mx-auto w-20 h-20",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary/10"}),e.jsx(t.div,{animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-4 border-primary border-t-transparent"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-medium text-muted-foreground mb-2",children:"Loading staff information"}),e.jsx("p",{className:"text-sm text-muted-foreground/70",children:"Please wait a moment..."})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-warm",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsx(t.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-12",children:e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs(b,{variant:"ghost",onClick:()=>x("/admin/staffs"),className:"gap-2 h-12 px-4 rounded-xl hover:bg-white/60 hover:shadow-soft transition-all duration-300 backdrop-blur-sm",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Staff"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"font-display text-3xl md:text-4xl font-bold text-primary mb-3",children:n?"Edit Staff Member":"Add New Staff"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl",children:n?"Update staff member information and permissions":"Add a new member to your beauty store Staff"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"lg:col-span-2 space-y-8",children:[e.jsxs(y,{className:"border-0 shadow-elevated overflow-hidden bg-white/80 backdrop-blur-lg",children:[e.jsx(R,{className:"pb-6 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-primary shadow-soft",children:e.jsx(L,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(D,{className:"font-display text-2xl",children:"Personal Information"}),e.jsx($,{className:"text-base",children:"Basic details about the staff member"})]})]})}),e.jsxs(N,{className:"pt-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{htmlFor:"first_name",className:"text-base font-medium",children:"First Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"first_name",value:s.first_name,onChange:a=>{m(r=>({...r,first_name:a.target.value})),u(r=>({...r,first_name:""}))},placeholder:"Enter first name",className:l("h-14 text-base pl-12 rounded-xl border-2 transition-all duration-300 bg-white/50 backdrop-blur-sm",d.first_name?"border-destructive focus:border-destructive/80 shadow-sm":"border-border/50 focus:border-primary/50 hover:border-primary/30 focus:shadow-card")}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:e.jsx(L,{className:"h-5 w-5"})})]}),e.jsx(j,{children:d.first_name&&e.jsx(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive px-4 py-2 bg-destructive/5 rounded-lg",children:d.first_name})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{htmlFor:"last_name",className:"text-base font-medium",children:"Last Name *"}),e.jsx(g,{id:"last_name",value:s.last_name,onChange:a=>{m(r=>({...r,last_name:a.target.value})),u(r=>({...r,last_name:""}))},placeholder:"Enter last name",className:l("h-14 text-base rounded-xl border-2 transition-all duration-300 bg-white/50 backdrop-blur-sm",d.last_name?"border-destructive focus:border-destructive/80 shadow-sm":"border-border/50 focus:border-primary/50 hover:border-primary/30 focus:shadow-card")}),e.jsx(j,{children:d.last_name&&e.jsx(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive px-4 py-2 bg-destructive/5 rounded-lg",children:d.last_name})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{htmlFor:"email",className:"text-base font-medium",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"email",type:"email",value:s.email,onChange:a=>{m(r=>({...r,email:a.target.value})),u(r=>({...r,email:""}))},placeholder:"staff@doonneys.com",className:l("h-14 text-base pl-12 rounded-xl border-2 transition-all duration-300 bg-white/50 backdrop-blur-sm",d.email?"border-destructive focus:border-destructive/80 shadow-sm":"border-border/50 focus:border-primary/50 hover:border-primary/30 focus:shadow-card")}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:e.jsx(Y,{className:"h-5 w-5"})})]}),e.jsx(j,{children:d.email&&e.jsx(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive px-4 py-2 bg-destructive/5 rounded-lg",children:d.email})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(v,{htmlFor:"mobile_number",className:"text-base font-medium",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(g,{id:"mobile_number",value:s.mobile_number,onChange:a=>{m(r=>({...r,mobile_number:a.target.value})),u(r=>({...r,mobile_number:""}))},placeholder:"+1 (825) 000-0000",className:l("h-14 text-base pl-12 rounded-xl border-2 transition-all duration-300 bg-white/50 backdrop-blur-sm",d.mobile_number?"border-destructive focus:border-destructive/80 shadow-sm":"border-border/50 focus:border-primary/50 hover:border-primary/30 focus:shadow-card")}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground",children:e.jsx(Z,{className:"h-5 w-5"})})]}),e.jsx(j,{children:d.mobile_number&&e.jsx(t.p,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"text-sm text-destructive px-4 py-2 bg-destructive/5 rounded-lg",children:d.mobile_number})})]})]})]})]}),e.jsxs(y,{className:"border-0 shadow-elevated overflow-hidden bg-white/80 backdrop-blur-lg",children:[e.jsx(R,{className:"pb-6 bg-gradient-to-r from-primary/5 via-primary/10 to-primary/5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-gradient-primary shadow-soft",children:e.jsx(P,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx(D,{className:"font-display text-2xl",children:"Access Level"}),e.jsx($,{className:"text-base",children:"Choose the appropriate role and permissions"})]})]})}),e.jsx(N,{className:"pt-8",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs(t.button,{type:"button",onClick:()=>m(a=>({...a,role_id:""})),className:l("w-full p-5 rounded-xl border-2 transition-all duration-300 text-left relative overflow-hidden group",s.role_id?"border-border/50 hover:border-primary/30 hover:shadow-soft":"border-primary shadow-card-hover","border-border/50","bg-gradient-to-r from-white/80 via-white/40 to-white/80"),whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:l("p-3 rounded-lg transition-all duration-300 shadow-sm",s.role_id?"bg-white/80 shadow-border/30 group-hover:shadow-primary/20":"bg-gradient-primary shadow-primary/30"),children:e.jsx(ee,{className:l("h-5 w-5 transition-all duration-300",s.role_id?"text-muted-foreground":"text-white")})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:l("font-display font-semibold text-lg",s.role_id?"text-foreground":"text-primary"),children:"No Role Assigned"}),!s.role_id&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},className:"w-7 h-7 rounded-full bg-gradient-primary flex items-center justify-center shadow-md",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Staff member will have no specific permissions"})]})]}),!s.role_id&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent"})]}),f.map((a,r)=>{const i=s.role_id===a.id,o=J(r);return e.jsxs(t.button,{type:"button",onClick:()=>m(E=>({...E,role_id:a.id})),className:l("w-full p-5 rounded-xl border-2 transition-all duration-300 text-left relative overflow-hidden group",i?"border-primary shadow-card-hover":"border-border/50 hover:border-primary/30 hover:shadow-soft",o.border,"bg-gradient-to-r",o.gradient),whileHover:{scale:1.01},whileTap:{scale:.99},children:[e.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[e.jsx("div",{className:l("p-3 rounded-lg transition-all duration-300 shadow-sm flex items-center justify-center w-11 h-11",i?"bg-gradient-primary shadow-primary/30":"bg-white/80 shadow-border/30 group-hover:shadow-primary/20",o.bg),children:e.jsx("span",{className:l("font-bold text-sm",i?"text-white":o.text),children:G(a.name)})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:l("font-display font-semibold text-lg",i?"text-primary":"text-foreground"),children:a.name}),i&&e.jsx(t.div,{initial:{scale:0},animate:{scale:1},className:"w-7 h-7 rounded-full bg-gradient-primary flex items-center justify-center shadow-md",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:a.description}),e.jsx("div",{className:"flex items-center gap-2 mt-3",children:e.jsxs("span",{className:l("text-xs px-2 py-1 rounded-full",o.text,o.bg),children:[a.staffCount," staff assigned"]})})]})]}),i&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent"})]},a.id)})]})})]})]}),e.jsx("div",{className:"space-y-8",children:e.jsxs(t.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"space-y-8",children:[e.jsx(y,{className:"border-0 shadow-elevated overflow-hidden bg-gradient-to-br from-primary/10 via-primary/5 to-secondary/10 backdrop-blur-lg",children:e.jsx(N,{className:"p-0",children:e.jsxs("div",{className:"p-8 text-center space-y-8",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:20},className:"w-28 h-28 rounded-full bg-gradient-primary flex items-center justify-center text-white text-3xl font-bold shadow-xl",children:(s.first_name[0]||"")+(s.last_name[0]||"")||"?"}),e.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2",children:e.jsx("div",{className:"px-4 py-2 rounded-full bg-white/90 backdrop-blur-sm shadow-lg text-sm font-medium",children:((S=f.find(a=>a.id===s.role_id))==null?void 0:S.name)||"No Role"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-2xl font-semibold mb-2",children:Q()||"New Staff Member"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:s.email||"email@doonneys.com"})]}),e.jsx(ae,{className:"bg-border/50"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-white/60 backdrop-blur-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Phone"}),e.jsx("p",{className:"font-medium text-lg",children:s.mobile_number||"â€”"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-white/60 backdrop-blur-sm",children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wider mb-2",children:"Role"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary/10",children:[e.jsx(P,{className:"h-3.5 w-3.5 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-primary",children:((F=f.find(a=>a.id===s.role_id))==null?void 0:F.name.split(" ")[0])||"No Role"})]})]})]})]})]})})}),e.jsx(y,{className:"border-0 shadow-soft bg-white/80 backdrop-blur-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-display text-lg font-semibold",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Ensure the email address is valid for system communications"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Choose the appropriate access level based on the staff member's responsibilities"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"All fields marked with * are required for submission"})]})]})]})})})]})})]}),e.jsx(t.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5},className:"mt-12 pt-8 border-t border-border/30",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-6 p-6 rounded-2xl bg-white/80 backdrop-blur-sm shadow-elevated border border-border/20",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"font-display text-xl font-semibold mb-2",children:n?"Update Staff Member":"Create New Staff"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:n?"Review changes and save updates":"Double-check information before creating"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 justify-center",children:[e.jsx(b,{variant:"outline",onClick:()=>x("/admin/staffs"),className:"h-12 px-6 rounded-xl border-2 hover:shadow-soft transition-all duration-300 backdrop-blur-sm",children:"Cancel"}),e.jsx(b,{onClick:()=>m(T),variant:"ghost",className:"h-12 px-6 rounded-xl text-muted-foreground hover:text-foreground transition-all duration-300 backdrop-blur-sm",children:"Clear Form"}),e.jsx(b,{onClick:O,disabled:k,className:"h-12 px-8 rounded-xl bg-gradient-primary hover:opacity-90 transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"h-5 w-5 animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),n?"Update Staff":"Create Staff"]})})]})]})})})]})})};export{xe as AdminStaffForm,xe as default};
