import{r as o,U as q,j as e,v as x,w as H,B as f,x as R,ar as I,a5 as V,an as z,N as G,h as m,a6 as a}from"./index-DrzvgQSx.js";import{L as p}from"./label-D6nqg-AK.js";import{S as j}from"./switch-BNZbPRLI.js";import{S as E}from"./separator-DpYAwveS.js";import{C as w,a as g,b as N,d as y}from"./card-CSdj4VlM.js";import{A as J,a as K,b as Q,c as W,d as X,e as Z,f as $,g as ee,h as se}from"./alert-dialog-DhLhMJxG.js";import{L as re}from"./lock-DWWiw9OW.js";import{E as v}from"./eye-off-MxEi3Of0.js";import{E as b}from"./eye-DtInb1xn.js";import{L as C}from"./loader-circle-oXQTLidO.js";import{S as te}from"./smartphone-DwZ_sJ1F.js";import{T as U}from"./triangle-alert-BegDlvxd.js";import{T}from"./trash-2-DF_8SWob.js";import"./index-DDpYfoMH.js";const we=()=>{const{logout:L}=o.useContext(q),[t,l]=o.useState({current:"",new:"",confirm:""}),[i,M]=o.useState({current:!1,new:!1,confirm:!1}),[A,S]=o.useState(!1),[D,F]=o.useState(!1),[k,P]=o.useState(!1),[c,d]=o.useState({orderUpdates:!0,smsAlerts:!1,securityNotifications:!0});o.useEffect(()=>{(async()=>{try{const n=(await m.get("/get-notifications/")).data;!n.error&&n.data?d({orderUpdates:n.data.order_updates=="1",smsAlerts:n.data.sms_alerts=="1",securityNotifications:n.data.security_notifications=="1"}):a.error(n.data||"Failed to fetch notification preferences")}catch(r){console.error("Error fetching notification preferences:",r),a.error("Failed to fetch notification preferences")}})()},[]);const B=()=>t.current.trim()?t.new.trim()?t.new.length<8?(a.error("New password must be at least 8 characters"),!1):t.new!==t.confirm?(a.error("New passwords do not match"),!1):t.current===t.new?(a.error("New password must be different from current password"),!1):!0:(a.error("New password is required"),!1):(a.error("Current password is required"),!1),O=async()=>{var s,r;if(B()){S(!0);try{const h=(await m.post("/change-password/",{opassword:t.current,npassword:t.new,cpassword:t.confirm})).data;!h.error&&h.data?(a.success("Your password has been updated successfully"),l({current:"",new:"",confirm:""})):a.error(h.data||"Failed to update password")}catch(n){console.error("Error updating password:",n),a.error(((r=(s=n.response)==null?void 0:s.data)==null?void 0:r.data)||"Failed to update password. Please try again.")}finally{S(!1)}}},Y=async()=>{F(!0);try{let s=new FormData;s.append("orderUpdates",c.orderUpdates?"1":"0"),s.append("smsAlerts",c.smsAlerts?"1":"0"),s.append("securityNotifications",c.securityNotifications?"1":"0");const n=(await m.post("/update-notifications/",s)).data;!n.error&&n.data?a.success("Notification preferences updated"):a.error(n.data||"Failed to update notification preferences")}catch(s){console.error("Error updating notifications:",s),a.error("Failed to update notification preferences")}finally{F(!1)}},_=async()=>{P(!0);try{const r=(await m.post("/delete-my-account/")).data;!r.error&&r.data?(a.success("Your account has been deleted successfully"),setTimeout(()=>L(),1500)):a.error(r.data||"Failed to delete account")}catch(s){console.error("Error deleting account:",s),a.error("Failed to delete account")}finally{P(!1)}},u=s=>{M(r=>({...r,[s]:!r[s]}))};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl font-bold",children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account security and notification preferences"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs(w,{className:"border-0 shadow-soft bg-white/50 backdrop-blur-sm",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-primary/10 to-accent/10 flex items-center justify-center",children:e.jsx(re,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx(N,{className:"font-display text-xl",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your account password for enhanced security"})]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"current-password",className:"font-medium",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"current-password",type:i.current?"text":"password",placeholder:"Enter your current password",value:t.current,onChange:s=>l(r=>({...r,current:s.target.value})),className:"h-11 pr-10"}),e.jsx("button",{type:"button",onClick:()=>u("current"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:i.current?e.jsx(v,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"new-password",className:"font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"new-password",type:i.new?"text":"password",placeholder:"Enter your new password",value:t.new,onChange:s=>l(r=>({...r,new:s.target.value})),className:"h-11 pr-10"}),e.jsx("button",{type:"button",onClick:()=>u("new"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:i.new?e.jsx(v,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(p,{htmlFor:"confirm-password",className:"font-medium",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{id:"confirm-password",type:i.confirm?"text":"password",placeholder:"Confirm your new password",value:t.confirm,onChange:s=>l(r=>({...r,confirm:s.target.value})),className:H("h-11 pr-10",t.confirm&&t.new!==t.confirm&&"border-destructive")}),e.jsx("button",{type:"button",onClick:()=>u("confirm"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:i.confirm?e.jsx(v,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})})]}),t.confirm&&t.new!==t.confirm&&e.jsx("p",{className:"text-xs text-destructive",children:"Passwords do not match"})]}),e.jsx(f,{onClick:O,disabled:A||!t.current||!t.new||!t.confirm,className:"w-full bg-gradient-to-r from-primary to-accent hover:shadow-md",children:A?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Update Password"]})})]})})]}),e.jsxs(w,{className:"border-0 shadow-soft bg-white/50 backdrop-blur-sm",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-accent/10 to-highlight/10 flex items-center justify-center",children:e.jsx(I,{className:"h-6 w-6 text-accent"})}),e.jsxs("div",{children:[e.jsx(N,{className:"font-display text-xl",children:"Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose how you want to be notified"})]})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Order Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Shipping and delivery notifications"})]})]}),e.jsx(j,{checked:c.orderUpdates,onCheckedChange:s=>d(r=>({...r,orderUpdates:s}))})]}),e.jsx(E,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(te,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Text message notifications"})]})]}),e.jsx(j,{checked:c.smsAlerts,onCheckedChange:s=>d(r=>({...r,smsAlerts:s}))})]}),e.jsx(E,{}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Security Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account security notifications"})]})]}),e.jsx(j,{checked:c.securityNotifications,onCheckedChange:s=>d(r=>({...r,securityNotifications:s}))})]}),e.jsx(f,{onClick:Y,disabled:D,className:"w-full mt-6",children:D?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Notification Preferences"})]})})]})]}),e.jsxs(w,{className:"border-0 shadow-soft bg-white/50 backdrop-blur-sm",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-secondary/10 to-muted-foreground/10 flex items-center justify-center",children:e.jsx(G,{className:"h-6 w-6 text-secondary"})}),e.jsxs("div",{children:[e.jsx(N,{className:"font-display text-xl",children:"Security"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your account security and access"})]})]})}),e.jsx(y,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-6 rounded-lg border border-destructive/20 bg-destructive/5",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx(U,{className:"h-6 w-6 text-destructive flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-destructive",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Once you delete your account, there is no going back. All your data, orders, and preferences will be permanently deleted."})]})]}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(f,{variant:"destructive",className:"gap-2 hover:bg-destructive/90",children:[e.jsx(T,{className:"h-4 w-4"}),"Delete Account"]})}),e.jsxs(Q,{children:[e.jsxs(W,{children:[e.jsxs(X,{className:"text-destructive flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Delete Your Account?"]}),e.jsxs(Z,{className:"space-y-2",children:[e.jsx("p",{children:"This action cannot be undone. This will permanently:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm",children:[e.jsx("li",{children:"Delete your account and all personal information"}),e.jsx("li",{children:"Remove all your orders and wishlist items"}),e.jsx("li",{children:"Delete your saved addresses and payment methods"}),e.jsx("li",{children:"Cancel any pending subscriptions or orders"})]}),e.jsx("p",{className:"font-medium mt-2",children:"Are you absolutely sure?"})]})]}),e.jsxs($,{children:[e.jsx(ee,{children:"Cancel"}),e.jsx(se,{onClick:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 gap-2",disabled:k,children:k?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-4 w-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"h-4 w-4"}),"Delete Account"]})})]})]})]})]})})})]})]})};export{we as default};
