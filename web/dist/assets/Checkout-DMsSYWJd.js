import{p as ts,R as is,r as a,Y as Fe,j as e,_ as ge,W as Ae,a8 as zs,$ as Hs,a9 as ls,Z as Us,V as Ks,aa as Ws,ab as Ys,w as D,ac as Js,U as Xs,F as Zs,ad as ds,a0 as ns,h as V,a6 as I,ae as Qs,o as Ce,B as y,L as ne,P as Qe,a as ue,q as W,b as er,m as he,a4 as es,v as L,a5 as sr,k as rr,H as m,f as ss,J as ce,M as ke,y as ar,d as tr,X as ir,T as lr,af as dr,ag as nr,ah as cr,x as or,ai as mr,aj as xr,ak as rs,al as pr,am as ur,an as hr}from"./index-DrzvgQSx.js";import{L as v}from"./label-D6nqg-AK.js";import{u as fr}from"./index-DDpYfoMH.js";import{D as jr,a as gr,b as Nr,c as vr,d as br}from"./dialog-B_H0D0bM.js";import{S as yr,a as wr,b as Cr,c as kr,d as Sr}from"./select-CeCrIOLN.js";import{L as as}from"./log-in-D64MuTPL.js";import{A as Se}from"./arrow-left-4JsjAwAx.js";import{T as _e}from"./truck-Bjx6mnMk.js";import{S as oe}from"./store-Cjxw61W-.js";import{C as K}from"./circle-check-big-Cc93Cm_Q.js";import{P as Pe}from"./plus-CdXz1Jo6.js";import{S as _r}from"./square-pen-BAbl0GsK.js";import{L as J}from"./loader-circle-oXQTLidO.js";import{C as X}from"./circle-alert-D5MbGcH3.js";import{C as fe}from"./credit-card-B1BYDSKm.js";import{L as cs}from"./lock-DWWiw9OW.js";import{B as Pr}from"./building-DyFMd_br.js";import{C as Rr}from"./calendar-Bh2qMya8.js";import"./index-BdQq_4o_.js";import"./chevron-up-DEDQgLDp.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=ts("LockKeyhole",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=ts("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);var Ee="Radio",[Er,os]=is(Ee),[Ir,Dr]=Er(Ee),ms=a.forwardRef((p,o)=>{const{__scopeRadio:x,name:C,checked:c=!1,required:j,disabled:N,value:P="on",onCheck:i,form:A,...u}=p,[k,w]=a.useState(null),h=Fe(o,S=>w(S)),f=a.useRef(!1),F=k?A||!!k.closest("form"):!0;return e.jsxs(Ir,{scope:x,checked:c,disabled:N,children:[e.jsx(ge.button,{type:"button",role:"radio","aria-checked":c,"data-state":hs(c),"data-disabled":N?"":void 0,disabled:N,value:P,...u,ref:h,onClick:Ae(p.onClick,S=>{c||i==null||i(),F&&(f.current=S.isPropagationStopped(),f.current||S.stopPropagation())})}),F&&e.jsx(us,{control:k,bubbles:!f.current,name:C,value:P,checked:c,required:j,disabled:N,form:A,style:{transform:"translateX(-100%)"}})]})});ms.displayName=Ee;var xs="RadioIndicator",ps=a.forwardRef((p,o)=>{const{__scopeRadio:x,forceMount:C,...c}=p,j=Dr(xs,x);return e.jsx(zs,{present:C||j.checked,children:e.jsx(ge.span,{"data-state":hs(j.checked),"data-disabled":j.disabled?"":void 0,...c,ref:o})})});ps.displayName=xs;var Lr="RadioBubbleInput",us=a.forwardRef(({__scopeRadio:p,control:o,checked:x,bubbles:C=!0,...c},j)=>{const N=a.useRef(null),P=Fe(N,j),i=fr(x),A=Hs(o);return a.useEffect(()=>{const u=N.current;if(!u)return;const k=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(k,"checked").set;if(i!==x&&h){const f=new Event("click",{bubbles:C});h.call(u,x),u.dispatchEvent(f)}},[i,x,C]),e.jsx(ge.input,{type:"radio","aria-hidden":!0,defaultChecked:x,...c,tabIndex:-1,ref:P,style:{...c.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});us.displayName=Lr;function hs(p){return p?"checked":"unchecked"}var qr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ne="RadioGroup",[Mr,pa]=is(Ne,[ls,os]),fs=ls(),js=os(),[Or,Tr]=Mr(Ne),gs=a.forwardRef((p,o)=>{const{__scopeRadioGroup:x,name:C,defaultValue:c,value:j,required:N=!1,disabled:P=!1,orientation:i,dir:A,loop:u=!0,onValueChange:k,...w}=p,h=fs(x),f=Us(A),[F,S]=Ks({prop:j,defaultProp:c??null,onChange:k,caller:Ne});return e.jsx(Or,{scope:x,name:C,required:N,disabled:P,value:F,onValueChange:S,children:e.jsx(Ws,{asChild:!0,...h,orientation:i,dir:f,loop:u,children:e.jsx(ge.div,{role:"radiogroup","aria-required":N,"aria-orientation":i,"data-disabled":P?"":void 0,dir:f,...w,ref:o})})})});gs.displayName=Ne;var Ns="RadioGroupItem",vs=a.forwardRef((p,o)=>{const{__scopeRadioGroup:x,disabled:C,...c}=p,j=Tr(Ns,x),N=j.disabled||C,P=fs(x),i=js(x),A=a.useRef(null),u=Fe(o,A),k=j.value===c.value,w=a.useRef(!1);return a.useEffect(()=>{const h=F=>{qr.includes(F.key)&&(w.current=!0)},f=()=>w.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",f)}},[]),e.jsx(Ys,{asChild:!0,...P,focusable:!N,active:k,children:e.jsx(ms,{disabled:N,required:j.required,checked:k,...i,...c,name:j.name,ref:u,onCheck:()=>j.onValueChange(c.value),onKeyDown:Ae(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:Ae(c.onFocus,()=>{var h;w.current&&((h=A.current)==null||h.click())})})})});vs.displayName=Ns;var $r="RadioGroupIndicator",bs=a.forwardRef((p,o)=>{const{__scopeRadioGroup:x,...C}=p,c=js(x);return e.jsx(ps,{...c,...C,ref:o})});bs.displayName=$r;var ys=gs,ws=vs,Gr=bs;const je=a.forwardRef(({className:p,...o},x)=>e.jsx(ys,{className:D("grid gap-2",p),...o,ref:x}));je.displayName=ys.displayName;const se=a.forwardRef(({className:p,...o},x)=>e.jsx(ws,{ref:x,className:D("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",p),...o,children:e.jsx(Gr,{className:"flex items-center justify-center",children:e.jsx(Js,{className:"h-2.5 w-2.5 fill-current text-current"})})}));se.displayName=ws.displayName;const Re={base:{fontSize:"16px",color:"hsl(var(--foreground))",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"hsl(var(--muted-foreground))"},":focus":{color:"hsl(var(--foreground))"}},invalid:{color:"hsl(var(--destructive))",":focus":{color:"hsl(var(--destructive))"}}},Vr=({amount:p,email:o,orderId:x,payload:C,onPaymentSuccess:c,onPaymentError:j})=>{const N=mr(),P=xr(),i=ds(),{items:A}=ns(),[u,k]=a.useState(!1),[w,h]=a.useState(""),[f,F]=a.useState({number:!1,expiry:!1,cvc:!1}),S=async b=>{var M,t;if(b.preventDefault(),!N||!P){j("Stripe not loaded");return}if(!f.number||!f.expiry||!f.cvc){h("Please complete all card details");return}k(!0),h("");try{const E=(await V.post("/create-payment-intent/",C)).data;if(E.error||!((M=E.data)!=null&&M.clientSecret))throw new Error(E.data||"Failed to create payment intent");const{clientSecret:B}=E.data,re=P.getElement(rs);if(!re)throw new Error("Card element not found");const z=await N.confirmCardPayment(B,{payment_method:{card:re,billing_details:{email:o}}});if(z.error)throw new Error(z.error.message||"Payment failed");if(((t=z.paymentIntent)==null?void 0:t.status)==="succeeded"){const ae=await V.post("/confirm-payment/",{orderId:x,paymentIntentId:z.paymentIntent.id,amount:p});if(ae.data.error)throw new Error(ae.data.data||"Failed to update order");i({event:"purchase",value:p,metadata:{order_id:x,items:A}}),c(z.paymentIntent.id)}else throw new Error("Payment not successful")}catch(O){console.log(O),j(O.message||"An unexpected error occurred")}finally{k(!1)}},q=b=>{var M,t,O;b.elementType==="cardNumber"?(F(E=>({...E,number:b.complete})),h(((M=b.error)==null?void 0:M.message)||"")):b.elementType==="cardExpiry"?(F(E=>({...E,expiry:b.complete})),h(((t=b.error)==null?void 0:t.message)||"")):b.elementType==="cardCvc"&&(F(E=>({...E,cvc:b.complete})),h(((O=b.error)==null?void 0:O.message)||""))};return e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(v,{className:"flex items-center gap-2 mb-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Card Number"]}),e.jsx("div",{className:"p-3 border border-input rounded-lg bg-background/50",children:e.jsx(rs,{options:{style:Re,showIcon:!0,placeholder:"1234 5678 9012 3456"},onChange:q,className:"min-h-[40px]"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(v,{className:"flex items-center gap-2 mb-2",children:[e.jsx(Rr,{className:"h-4 w-4"}),"Expiry Date"]}),e.jsx("div",{className:"p-3 border border-input rounded-lg bg-background/50",children:e.jsx(pr,{options:{style:Re,placeholder:"MM/YY"},onChange:q})})]}),e.jsxs("div",{children:[e.jsxs(v,{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ar,{className:"h-4 w-4"}),"CVC"]}),e.jsx("div",{className:"p-3 border border-input rounded-lg bg-background/50",children:e.jsx(ur,{options:{style:Re,placeholder:"123"},onChange:q})})]})]}),w&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:w})]})}),e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(hr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Secure Payment"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Your payment information is encrypted and secure."})]})]})})]}),e.jsx(y,{type:"submit",disabled:!N||u||!f.number||!f.expiry||!f.cvc,className:"w-full h-12 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-lg font-medium",children:u?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 mr-2 animate-spin"}),"Processing Payment..."]}):e.jsxs(e.Fragment,{children:[e.jsx(cs,{className:"h-5 w-5 mr-2"}),"Pay ",m(p)]})}),e.jsxs("div",{className:"flex items-center justify-center gap-4 pt-4 border-t",children:[e.jsx("div",{className:"flex",children:["visa","mastercard","amex","discover"].map(b=>e.jsx("div",{className:"w-8 h-6 bg-muted rounded flex items-center justify-center -ml-1 first:ml-0",children:e.jsx("div",{className:"text-xs font-medium",children:b.charAt(0).toUpperCase()})},`${b}-${W()}`))}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Secured by ",e.jsx("span",{className:"font-medium",children:"Stripe"})]})]})]})},ua=()=>{var Xe;const{auth:p,my_details:o}=a.useContext(Xs),x=Zs(),C=ds(),{items:c,getTotalPrice:j,clearCart:N,refreshCart:P}=ns(),[i,A]=a.useState("shipping"),[u,k]=a.useState("card"),[w,h]=a.useState(""),[f,F]=a.useState([]),[S,q]=a.useState("information"),[b,M]=a.useState(""),[t,O]=a.useState(null),[E,B]=a.useState(""),[re,z]=a.useState(!1),[ae,Cs]=a.useState(18),[te,ks]=a.useState(!0),[H,Ss]=a.useState(0),[Br,_s]=a.useState(""),[zr,Ps]=a.useState(""),[Hr,Ie]=a.useState(!1),[me,De]=a.useState(!1),[Le,Rs]=a.useState([]),[ie,As]=a.useState([]),[n,qe]=a.useState(null),[T,Me]=a.useState(""),[Fs,Z]=a.useState(!1),[R,$]=a.useState({label:"Home",name:"",street_address:"",city:"",province:"",postal_code:"",mobile_number:"",is_default:0}),[Oe,Te]=a.useState(!1),[xe,$e]=a.useState(!1),[Ge,ve]=a.useState(""),[Es,Is]=a.useState(!1),[be,Ds]=a.useState(""),[Ve,Ls]=a.useState(null),[Ur,qs]=a.useState(""),Be=a.useRef(!1),[_,Q]=a.useState({firstName:(o==null?void 0:o.first_name)||"",lastName:(o==null?void 0:o.last_name)||"",email:(o==null?void 0:o.email)||"",phone:(o==null?void 0:o.mobile_number)||""});a.useEffect(()=>{p&&(ze(),Os(),Ms()),P()},[p]),a.useEffect(()=>{n&&i==="shipping"&&S==="shipping"&&ye()},[n,i,S]),a.useEffect(()=>{i==="pickup"&&u==="cash"&&k("card")},[i]),a.useEffect(()=>{c.length&&(Be.current||(C({event:"begin_checkout",value:j(),metadata:{items:c.map(s=>({product_id:s.product.id,quantity:s.quantity}))}}),Be.current=!0))},[c,C,j]);const ze=async()=>{try{const r=(await V.get("/get-addresses/")).data;if(!r.error&&r.data){const l=r.data;Rs(l);const d=l.find(g=>g.is_default===1);d&&(qe(d),Q(g=>({...g,firstName:d.name.split(" ")[0]||g.firstName,lastName:d.name.split(" ").slice(1).join(" ")||g.lastName,phone:d.mobile_number||g.phone})))}}catch(s){console.error("Error fetching addresses:",s),I.error("Failed to load addresses")}},Ms=async()=>{try{const r=(await V.get("/get-pickup-locations/")).data;if(!r.error&&r.data){const l=r.data.filter(d=>d.status==="active");As(l),l.length>0&&Me(l[0].id);return}}catch(s){console.error("Error fetching pickup locations:",s),I.error("Failed to load pickup locations")}},Os=async()=>{try{Ie(!0);const r=(await V.get("/get-settings/")).data;if(!r.error&&r.data){const l=r.data;Cs(parseFloat(l.store_gst)||18),ks(l.store_free_shipping==="1"||l.store_free_shipping===!0),Ss(parseFloat(l.store_free_shipping_threshold)||0),_s(l.store_address||""),Ps(l.store_pickup_hours||"Mon-Fri: 10AM-6PM, Sat: 11AM-5PM"),l.stripe_publishable_key&&(qs(l.stripe_publishable_key),Ls(Qs(l.stripe_publishable_key)))}}catch(s){console.error("Error fetching store:",s),I.error("Failed to load store settings")}finally{Ie(!1)}},ye=async()=>{if(!n){I.error("Please select a shipping address first");return}try{De(!0);const s=c.map(d=>({id:d.product.id,quantity:d.quantity})),l=(await V.post("/shipment-price/",{items:s,address:{postal_code:n.postal_code,city:n.city,province:n.province,country:"CA"}})).data;if(!l.error&&l.data){const d=l.data,g=[];if(d.canada_post&&g.push({id:"canada_post",carrier:d.canada_post.carrier||"Canada Post",price:parseFloat(d.canada_post.price)||0,delivery:d.canada_post.delivery||"2-7 business days",serviceCode:"CP",deliveryDays:d.canada_post.delivery_days}),d.fedex&&g.push({id:"fedex",carrier:d.fedex.carrier||"FedEx",price:parseFloat(d.fedex.price)||0,delivery:d.fedex.delivery||"1-3 business days",serviceCode:"FX",deliveryDays:d.fedex.delivery_days}),d.dhl&&g.push({id:"dhl",carrier:d.dhl.carrier||"DHL",price:parseFloat(d.dhl.price)||0,delivery:d.dhl.delivery||"2-5 business days",serviceCode:"DHL",deliveryDays:d.dhl.delivery_days}),F(g),g.length>0){const we=g.reduce((pe,Ze)=>pe.price<Ze.price?pe:Ze);h(we.id)}}}catch(s){console.error("Error calculating shipping:",s),I.error("Failed to calculate shipping rates"),F([])}finally{De(!1)}},Ts=s=>{qe(s),Q(r=>({...r,firstName:s.name.split(" ")[0]||r.firstName,lastName:s.name.split(" ").slice(1).join(" ")||r.lastName,phone:s.mobile_number||r.phone}))},$s=async()=>{try{if(Te(!0),!R.name.trim()||!R.street_address.trim()||!R.city.trim()||!R.province.trim()||!R.postal_code.trim()){I.error("Please fill in all required address fields");return}const r=(await V.post("/save-address/",R)).data;!r.error&&r.data?(I.success("Address saved successfully"),await ze(),Z(!1),He()):I.error(r.data||"Failed to save address")}catch(s){console.error("Error saving address:",s),I.error("Failed to save address")}finally{Te(!1)}},He=()=>{$({label:"Home",name:`${_.firstName} ${_.lastName}`.trim(),street_address:"",city:"",province:"",postal_code:"",mobile_number:_.phone||"",is_default:0})},Ue=s=>{switch(s.toLowerCase()){case"home":return e.jsx(dr,{className:"h-5 w-5"});case"work":return e.jsx(Pr,{className:"h-5 w-5"});default:return e.jsx(ke,{className:"h-5 w-5"})}},U=j(),G=f.find(s=>s.id===w),ee=(()=>{if(i!=="shipping")return!1;if(te)return H>0?U>=H:!0;if((t==null?void 0:t.type)==="free_shipping"){const s=t.minPurchase||0;return s<=0||U>=s}return!1})(),Ke=ee?0:(G==null?void 0:G.price)||0,We=U*(ae/100),le=We;let Y=0;t&&(t.type==="percentage"?Y=U*t.value/100:t.type==="fixed"&&(Y=t.value));const de=U+Ke+le-Y,Ye=async()=>{if(!b.trim()){B("Please enter a discount code");return}try{z(!0),B("");const r=(await V.post("/check-discount/",{code:b.trim()})).data;if(r.error||!r.data){B(r.data||"Invalid discount code");return}const l=r.data;if(l.minPurchase&&U<Number(l.minPurchase)){B(`Minimum purchase of ${m(l.minPurchase)} required`);return}O({code:l.code,type:l.type,value:Number(l.value),minPurchase:Number(l.minPurchase||0)}),I.success(`Discount ${l.code} applied successfully`),M("")}catch(s){console.error("Discount error:",s),B("Failed to apply discount. Please try again.")}finally{z(!1)}},Gs=()=>{O(null),M(""),B("")},Je=async()=>{var s;try{$e(!0),ve("");const r={fulfillment_method:i,payment_method:u,address_id:i==="shipping"?n==null?void 0:n.id:null,pickup_id:i==="pickup"?T:null,recipient_first_name:_.firstName,recipient_last_name:_.lastName,recipient_phone:_.phone,recipient_email:_.email,discount_code:(t==null?void 0:t.code)??null,selected_shipping:i==="shipping"?{carrier_id:w}:null,items:c.map(g=>({product_id:g.product.id,quantity:g.quantity,variants:g.selectedVariants?Object.entries(g.selectedVariants).map(([we,pe])=>({variant_type:we,option_id:pe.id})):[]}))},d=(await V.post("/create-order/",r)).data;if(d.error||!((s=d.data)!=null&&s.orderId))throw new Error(d.data||"Order failed");Ds(d.data.orderId),u==="cash"?(N(),x(`/order-confirmation/${d.data.orderId}`)):q("payment")}catch(r){ve(r.message||"Checkout failed"),I.error(r.message||"Checkout failed")}finally{$e(!1)}},Vs=s=>{Is(!0),N(),I.success("Payment successful! Order confirmed."),x(`/order-confirmation/${be}`)},Bs=()=>{if(u==="cash"&&i==="shipping")return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-card to-card/80 rounded-2xl border border-border/50",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"h-12 w-12 text-yellow-600 mx-auto mb-4"}),e.jsx("h3",{className:"font-display text-xl mb-2",children:"Payment Method Not Available"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Cash on Delivery is not available for shipping orders. Please select a different payment method."}),e.jsxs(y,{onClick:()=>k("card"),className:"gap-2",children:[e.jsx(fe,{className:"h-4 w-4"}),"Switch to Card Payment"]})]})})});if(u==="card"&&Ve){const s={fulfillment_method:i,payment_method:u,address_id:i==="shipping"?n==null?void 0:n.id:null,pickup_id:i==="pickup"?T:null,discount_code:(t==null?void 0:t.code)??null,selected_shipping:i==="shipping"?{carrier_id:w}:null,items:c.map(r=>({product_id:r.product.id,quantity:r.quantity,variants:r.selectedVariants?Object.entries(r.selectedVariants).map(([l,d])=>({variant_type:l,option_id:d.id})):[]}))};return e.jsx(nr,{stripe:Ve,children:e.jsx(Vr,{amount:de,orderId:Number(be),payload:s,email:_.email,onPaymentSuccess:Vs,onPaymentError:r=>{ve(r),I.error(`Payment failed: ${r}`)}})})}return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-gradient-to-br from-card to-card/80 rounded-2xl border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(cr,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl",children:"Cash on Delivery"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay with cash when you pick up your order"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(K,{className:"h-5 w-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Pickup Instructions"}),e.jsxs("ul",{className:"text-xs text-green-700 mt-1 space-y-1",children:[e.jsx("li",{children:"• Bring exact cash amount when picking up your order"}),e.jsx("li",{children:"• Have your order confirmation ready"}),e.jsx("li",{children:"• Valid ID may be required for verification"}),e.jsx("li",{children:"• Pickup must be made within 7 days"})]})]})]})}),(()=>{const s=ie.find(r=>r.id===T);if(s)return e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(oe,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Pickup Location"}),e.jsx("p",{className:"text-xs text-blue-700 mt-1",children:s.name}),e.jsx("p",{className:"text-xs text-blue-700",children:s.address}),e.jsxs("p",{className:"text-xs text-blue-700",children:[s.city,", ",s.state]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[e.jsx("strong",{children:"Hours:"})," ",s.hours.monday]})]})]})})})(),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-border",children:[e.jsx("p",{className:"text-muted-foreground",children:"Order Total"}),e.jsx("p",{className:"font-medium text-lg",children:m(de)})]}),e.jsxs("div",{className:"p-3 bg-background/50 rounded-lg border border-border",children:[e.jsx("p",{className:"text-muted-foreground",children:"Payment Due"}),e.jsx("p",{className:"font-medium text-lg text-green-600",children:"At Pickup"})]})]}),e.jsx(y,{onClick:Je,disabled:xe,className:"w-full h-12 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-lg font-medium",children:xe?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-5 w-5 mr-2 animate-spin"}),"Placing Order..."]}):e.jsxs(e.Fragment,{children:[e.jsx(or,{className:"h-5 w-5 mr-2"}),"Confirm Cash Order"]})})]})]})})};return p?c.length===0&&!Es?e.jsx(Ce,{children:e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Qe,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h1",{className:"font-display text-3xl mb-4",children:"Your cart is empty"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Add some items to checkout"}),e.jsx(y,{asChild:!0,size:"lg",children:e.jsx(ne,{to:"/shop",children:"Continue Shopping"})})]})})})}):e.jsxs(Ce,{children:[e.jsx("section",{className:"py-8 md:py-12",children:e.jsxs("div",{className:"container max-w-6xl",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-8",children:[e.jsx(ne,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),e.jsx(ue,{className:"h-4 w-4"}),e.jsx(ne,{to:"/cart",className:"hover:text-primary transition-colors",children:"Cart"}),e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{className:"text-foreground font-medium",children:"Checkout"})]}),e.jsx("div",{className:"mb-12",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:["information","shipping","payment","review"].map((s,r)=>{const l=["information","shipping","payment","review"],d=l.indexOf(S),g=l.indexOf(s);return e.jsxs("div",{className:"flex flex-col items-center flex-1 relative",children:[e.jsx("div",{className:"w-full h-1 bg-muted absolute top-5 left-1/2 -z-10"}),e.jsx("div",{className:D("w-full h-1 absolute top-5 left-1/2 -z-10 transition-all duration-500",S===s||g<d?"bg-primary w-full":"w-0")}),e.jsx("button",{onClick:()=>{g<=d&&q(s)},className:D("w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all duration-300",S===s?"bg-primary text-primary-foreground shadow-primary/30 shadow-lg":g<d?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:r+1}),e.jsx("span",{className:"text-xs font-medium capitalize",children:s})]},`${s}-${W()}`)})})}),e.jsx(er,{children:e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"font-display text-3xl md:text-4xl mb-2",children:"Secure Checkout"}),e.jsx("p",{className:"text-muted-foreground",children:"Complete your order in a few simple steps"})]})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[S==="information"&&e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(es,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-xl",children:"Customer Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tell us about yourself"})]})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs(v,{className:"mb-2 block text-sm font-medium",children:[e.jsx(es,{className:"h-4 w-4 inline mr-2"}),"First Name *"]}),e.jsx(L,{placeholder:"John",value:_.firstName,onChange:s=>Q(r=>({...r,firstName:s.target.value})),className:"bg-background/50",required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{className:"mb-2 block text-sm font-medium",children:"Last Name *"}),e.jsx(L,{placeholder:"Doe",value:_.lastName,onChange:s=>Q(r=>({...r,lastName:s.target.value})),className:"bg-background/50",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs(v,{className:"mb-2 block text-sm font-medium",children:[e.jsx(sr,{className:"h-4 w-4 inline mr-2"}),"Email *"]}),e.jsx(L,{type:"email",placeholder:"john@example.com",value:_.email,onChange:s=>Q(r=>({...r,email:s.target.value})),className:"bg-background/50",required:!0})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsxs(v,{className:"mb-2 block text-sm font-medium",children:[e.jsx(rr,{className:"h-4 w-4 inline mr-2"}),"Phone Number *"]}),e.jsx(L,{type:"tel",placeholder:"+1 (825) 000-0000",value:_.phone,onChange:s=>Q(r=>({...r,phone:s.target.value})),className:"bg-background/50",required:!0})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t flex justify-between items-center",children:[e.jsx(y,{variant:"ghost",asChild:!0,children:e.jsxs(ne,{to:"/cart",children:[e.jsx(Se,{className:"h-4 w-4 mr-2"}),"Back to Cart"]})}),e.jsxs(y,{onClick:()=>q("shipping"),size:"lg",disabled:!_.firstName||!_.lastName||!_.email||!_.phone,children:["Continue to Delivery",e.jsx(ue,{className:"h-4 w-4 ml-2"})]})]})]}),S==="shipping"&&e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(_e,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-xl",children:"Delivery Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose how you want to receive your order"})]})]}),e.jsxs(je,{value:i,onValueChange:s=>A(s),className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(v,{htmlFor:"pickup",className:D("flex flex-col p-5 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:shadow-md h-full",i==="pickup"?"border-primary bg-primary/5 shadow-primary/10 shadow-sm":"border-border hover:border-primary/50"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(se,{value:"pickup",id:"pickup"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(oe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium text-base",children:"In-store Pickup"}),e.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Free"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Pick up your order at our pickup locations"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-green-700",children:"No shipping fees"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-green-700",children:"Schedule pickup time"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-green-600"}),e.jsx("span",{className:"text-green-700",children:"Get expert advice"})]})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg text-green-600",children:"Free"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"No shipping charges"})]})})]}),e.jsxs(v,{htmlFor:"shipping",className:D("flex flex-col p-5 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:shadow-md h-full",i==="shipping"?"border-primary bg-primary/5 shadow-primary/10 shadow-sm":"border-border hover:border-primary/50"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(se,{value:"shipping",id:"shipping"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(_e,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium text-base",children:"Shipping / Delivery"}),te&&H>0?e.jsxs("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:["Free over ",m(H)]}):te?e.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Free Shipping"}):null]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Get your order delivered to your address"}),te&&H>0?e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-blue-800",children:"Free Shipping Available"}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Orders over ",m(H)," qualify for free shipping"]})]})]})}):te?e.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"h-4 w-4 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-green-800",children:"Free Shipping"}),e.jsx("p",{className:"text-xs text-green-700",children:"All orders qualify for free shipping"})]})]})}):null,e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-blue-700",children:"Doorstep delivery"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-blue-700",children:"Real-time tracking"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx(K,{className:"h-3 w-3 text-blue-600"}),e.jsx("span",{className:"text-blue-700",children:"Multiple carriers"})]})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-bold text-lg",children:ee?e.jsx("span",{className:"text-green-600",children:"Free"}):G?m(G.price):"Calculate"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n?"Rates calculated":"Select address for rates"})]})})]})]})]}),i==="pickup"&&ie.length>0&&e.jsxs("div",{className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(oe,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl",children:"Select Pickup Location"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose where you want to pick up your order"})]})]}),e.jsxs(yr,{value:T,onValueChange:Me,children:[e.jsx(wr,{className:"w-full",children:e.jsx(Cr,{placeholder:"Select a pickup location"})}),e.jsx(kr,{children:ie.map(s=>e.jsx(Sr,{value:s.id,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.address,", ",s.city,", ",s.state]})]})},`${s.id}-${W()}`))})]}),T&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-primary/5 to-accent/5 border border-primary/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(oe,{className:"h-5 w-5 text-primary"})}),e.jsx("div",{className:"flex-1",children:(()=>{const s=ie.find(r=>r.id===T);return s?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(ce,{className:"text-xs bg-primary text-primary-foreground",children:s.type.charAt(0).toUpperCase()+s.type.slice(1)})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:s.address}),e.jsxs("p",{children:[s.city,", ",s.state," ",s.zipCode]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s.contactPhone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Hours:"})," Mon-Fri: ",s.hours.monday]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Manager:"})," ",s.manager]})]})]}):null})()})]})})]}),i==="shipping"&&e.jsxs("div",{className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(ke,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl",children:"Shipping Address"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select or add a delivery address"})]})]}),e.jsxs(y,{variant:"outline",size:"sm",onClick:()=>{He(),Z(!0)},className:"gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Add New"]})]}),Le.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h4",{className:"font-medium mb-2",children:"No addresses saved"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Add a shipping address to calculate delivery options"}),e.jsxs(y,{onClick:()=>Z(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Add First Address"]})]}):e.jsx("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:Le.map(s=>e.jsx("div",{onClick:()=>Ts(s),className:D("p-4 rounded-xl border-2 cursor-pointer transition-all duration-300","hover:shadow-md hover:border-primary/50",(n==null?void 0:n.id)===s.id?"border-primary bg-primary/5 shadow-sm":"border-border"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:D("w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",(n==null?void 0:n.id)===s.id?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:Ue(s.label)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:s.label}),s.is_default===1&&e.jsxs(ce,{className:"text-xs bg-primary/10 text-primary border-primary/20",children:[e.jsx(ar,{className:"h-3 w-3 mr-1"}),"Default"]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-muted-foreground",children:s.street_address}),e.jsxs("p",{className:"text-muted-foreground",children:[s.city,", ",s.province," ",s.postal_code]}),e.jsx("p",{className:"text-muted-foreground",children:s.mobile_number})]})]})]})},`${s.id}-${W()}`))}),n&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-primary/5 to-accent/5 border border-primary/20 rounded-xl mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:Ue(n.label)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Selected Delivery Address"}),n.is_default===1&&e.jsx(ce,{className:"text-xs bg-primary text-primary-foreground",children:"Default"})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{children:e.jsx("strong",{children:n.name})}),e.jsx("p",{children:n.street_address}),e.jsxs("p",{children:[n.city,", ",n.province," ",n.postal_code]}),e.jsx("p",{children:n.mobile_number})]})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>Z(!0),className:"text-primary hover:text-primary/80",children:e.jsx(_r,{className:"h-4 w-4"})})]})}),n&&f.length>0&&e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium",children:"Available Shipping Options"}),e.jsxs(y,{variant:"ghost",size:"sm",onClick:ye,disabled:me,className:"gap-1",children:[e.jsx(J,{className:D("h-3 w-3",me&&"animate-spin")}),"Refresh Rates"]})]}),e.jsx(je,{value:w,onValueChange:h,className:"space-y-3",children:f.map(s=>e.jsxs(v,{htmlFor:s.id,className:D("flex items-center gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:shadow-md",w===s.id?"border-primary bg-primary/5 shadow-primary/10 shadow-sm":"border-border hover:border-primary/50"),children:[e.jsx(se,{value:s.id,id:s.id}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"font-medium",children:s.carrier}),e.jsx("span",{className:"text-xs px-2 py-1 bg-muted rounded",children:s.delivery})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.deliveryDays||"Standard delivery"})]}),e.jsx("div",{className:"text-right",children:ee?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-lg text-green-600",children:"Free"}),e.jsx("div",{className:"text-xs text-muted-foreground line-through",children:m(s.price)})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-lg",children:m(s.price)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Shipping"})]})})]},`${s.id}-${W()}`))})]}),n&&f.length===0&&!ee&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"No shipping rates available"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Please try refreshing rates or contact support for assistance"})]}),e.jsx(y,{variant:"outline",size:"sm",onClick:ye,disabled:me,className:"ml-auto",children:me?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Calculating..."]}):"Calculate Rates"})]})}),!n&&e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4"}),"Please select a shipping address to view delivery options"]})})]}),e.jsxs("div",{className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(fe,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-display text-xl",children:"Payment Method"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose your preferred payment method"})]})]}),e.jsxs(je,{value:u,onValueChange:s=>k(s),className:"space-y-4",children:[e.jsxs(v,{htmlFor:"card",className:D("flex items-center gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:shadow-md",u==="card"?"border-primary bg-primary/5 shadow-primary/10 shadow-sm":"border-border hover:border-primary/50"),children:[e.jsx(se,{value:"card",id:"card"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx(fe,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Credit/Debit Card"}),e.jsx("div",{className:"flex gap-1 ml-auto",children:["visa","mastercard","amex","discover"].map(s=>e.jsx("div",{className:"w-8 h-5 bg-muted rounded flex items-center justify-center text-xs",children:s.charAt(0).toUpperCase()},`${s}-${W()}`))})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay securely with your credit or debit card"})]})]}),i==="pickup"&&e.jsxs(v,{htmlFor:"cash",className:D("flex items-center gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 hover:shadow-md",u==="cash"?"border-primary bg-primary/5 shadow-primary/10 shadow-sm":"border-border hover:border-primary/50"),children:[e.jsx(se,{value:"cash",id:"cash"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx(Fr,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-medium",children:"Cash on Delivery"}),e.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Available for pickup"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pay with cash when you pick up your order at the store"})]})]}),i==="shipping"&&e.jsx("div",{className:"p-4 border border-yellow-200 bg-yellow-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Cash on Delivery Not Available"}),e.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Cash payment is only available for in-store pickup. For shipping orders, please use card payment."})]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4",children:[e.jsxs(y,{variant:"outline",onClick:()=>q("information"),className:"gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Back to Information"]}),e.jsx(y,{onClick:Je,size:"lg",className:"gap-2",disabled:i==="shipping"&&(!n||!w)||i==="pickup"&&!T||xe||u==="cash"&&i==="shipping",children:xe?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[u==="cash"?"Place Order":"Continue to Payment",e.jsx(ue,{className:"h-4 w-4"})]})})]})]}),S==="payment"&&e.jsx(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-card to-card/80 rounded-2xl p-6 md:p-8 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(cs,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-display text-xl",children:"Payment Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Securely complete your payment"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"p-4 bg-gradient-to-r from-primary/5 to-accent/5 border border-primary/20 rounded-xl mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:"Order Summary"}),e.jsxs(ce,{className:"bg-primary text-primary-foreground",children:["Order #",be]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("p",{className:"font-medium",children:m(U)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("p",{className:"font-medium",children:i==="pickup"||ee?"Free":m(Ke)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Tax (GST)"}),e.jsx("p",{className:"font-medium",children:m(le)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Discount"}),e.jsx("p",{className:"font-medium text-green-600",children:Y>0?`-${m(Y)}`:"None"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-lg",children:"Total"}),e.jsx("span",{className:"font-display text-2xl text-primary",children:m(de)})]})})]})}),e.jsx(Bs,{}),Ge&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:"Payment Error"})]}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:Ge})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t flex justify-between items-center",children:[e.jsxs(y,{variant:"outline",onClick:()=>q("shipping"),className:"gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),"Back to Shipping"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"By continuing, you agree to our Terms of Service"})]})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(he.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"sticky top-32",children:[e.jsxs("div",{className:"bg-gradient-to-b from-card to-card/80 rounded-2xl p-6 shadow-elevated border border-border/50 mb-6",children:[e.jsxs("h2",{className:"font-display text-xl mb-6 flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-primary"}),"Order Summary"]}),e.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto pr-2",children:c.map(s=>e.jsxs("div",{className:"flex gap-3 text-sm group",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("img",{src:tr(s.product.image),alt:s.product.name,className:"w-16 h-16 rounded-lg object-cover border border-border"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary text-primary-foreground text-xs rounded-full flex items-center justify-center",children:s.quantity})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium line-clamp-2 group-hover:text-primary transition-colors",children:s.product.name}),s.selectedVariants&&Object.keys(s.selectedVariants).length>0&&e.jsx("div",{className:"space-y-1 mt-1",children:Object.entries(s.selectedVariants).map(([r,l])=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:[r,":"]}),e.jsxs(ce,{variant:"outline",className:"px-2 py-0.5 h-5",children:[l.value,l.price_modifier&&parseFloat(l.price_modifier)!==0&&e.jsxs("span",{className:D("ml-1",parseFloat(l.price_modifier)>0?"text-green-600":"text-red-600"),children:["(",parseFloat(l.price_modifier)>0?"+":"",m(parseFloat(l.price_modifier)),")"]})]})]},`${r}-${W()}`))}),e.jsxs("p",{className:"text-muted-foreground text-xs mt-1",children:[m(s.product.price)," each"]})]}),e.jsxs("div",{className:"flex flex-col items-end justify-between",children:[e.jsx("p",{className:"font-medium",children:m(s.product.price*s.quantity)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.quantity," × ",m(s.product.price)]})]})]},`${s.product.id}-${W()}`))}),e.jsx("div",{className:"mb-6",children:t?e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Discount Applied"})]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:Gs,className:"h-6 w-6 p-0 hover:bg-green-100 text-green-800",children:e.jsx(ir,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"text-sm text-green-700 mb-1",children:[t.type==="percentage"&&e.jsxs("span",{children:[t.value,"% off (",t.code,")"]}),t.type==="fixed"&&e.jsxs("span",{children:["$",m(t.value)," off (",t.code,")"]}),t.type==="free_shipping"&&e.jsxs("span",{children:["Free shipping (",t.code,")"]})]}),e.jsxs("div",{className:"text-xs text-green-600 font-medium",children:["Minimum purchase: ",m(t.minPurchase)]})]}):e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{placeholder:"Discount code",value:b,onChange:s=>M(s.target.value),className:"flex-1 bg-background/50",onKeyDown:s=>s.key==="Enter"&&Ye()}),e.jsx(y,{variant:"outline",onClick:Ye,disabled:re||!b.trim(),className:"whitespace-nowrap",children:re?e.jsx(J,{className:"h-4 w-4 animate-spin"}):"Apply"})]}),E&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-sm text-red-600 p-2 bg-red-50 rounded-lg",children:[e.jsx(X,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{children:E})]})]})})]}),e.jsxs("div",{className:"bg-gradient-to-b from-card to-card/80 rounded-2xl p-6 shadow-elevated border border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-display text-xl",children:"Order Total"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-display text-3xl text-primary",children:m(de)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Including all taxes and fees"})]})]}),e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-muted-foreground/30"}),e.jsx("span",{className:"text-sm",children:"Subtotal"})]}),e.jsx("span",{className:"font-medium",children:m(U)})]}),Y>0&&e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lr,{className:"h-3.5 w-3.5 text-green-600"}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-sm text-green-700",children:["Discount (",t==null?void 0:t.code,")",(t==null?void 0:t.type)==="percentage"&&` - ${t.value}% off`,(t==null?void 0:t.type)==="fixed"&&` - ${m(t.value)} off`]}),(t==null?void 0:t.minPurchase)>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Min. purchase: ",m(t.minPurchase)]})]})]}),e.jsxs("span",{className:"text-green-600 font-medium",children:["-",m(Y)]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i==="pickup"?e.jsx(oe,{className:"h-3.5 w-3.5 text-primary"}):e.jsx(_e,{className:"h-3.5 w-3.5 text-primary"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm",children:i==="pickup"?"In-store Pickup":"Shipping"}),i==="shipping"&&n&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["To: ",n.city,", ",n.province]}),i==="pickup"&&T&&e.jsx("p",{className:"text-xs text-muted-foreground",children:(Xe=ie.find(s=>s.id===T))==null?void 0:Xe.name})]})]}),e.jsx("div",{className:"text-right",children:i==="pickup"?e.jsx("span",{className:"text-green-600 font-medium",children:"Free"}):ee?e.jsxs("div",{children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Free"}),G&&H>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Over ",m(H)]})]}):G?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:m(G.price)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:G.carrier})]}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"Select address"})})]}),e.jsxs("div",{className:"space-y-2 py-3 border-b border-border/50",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary/30"}),e.jsx("span",{className:"text-sm font-medium",children:"Taxes"})]}),e.jsx("span",{className:"font-medium",children:m(le)})]}),e.jsxs("div",{className:"flex justify-between items-center pl-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary/20"}),e.jsx("span",{className:"text-muted-foreground",children:"GST"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",ae.toFixed(2),"%)"]})]}),e.jsx("span",{children:m(We)})]})]})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-border",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-lg",children:"Total Amount"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Amount in CAD • ",c.length," item",c.length!==1?"s":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-display text-3xl text-primary",children:m(de)}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:le>0?`Includes ${m(le)} in taxes`:"Tax included"})]})]})})]})]})})]})]})}),e.jsx(jr,{open:Fs,onOpenChange:Z,children:e.jsxs(gr,{className:"sm:max-w-md",children:[e.jsxs(Nr,{children:[e.jsxs(vr,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"h-5 w-5 text-primary"}),"Add New Address"]}),e.jsx(br,{children:"Add a new delivery address for your order"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Address Label"}),e.jsxs("select",{value:R.label,onChange:s=>$(r=>({...r,label:s.target.value})),className:"w-full px-3 py-2 border border-input rounded-lg bg-background/50 text-sm focus:outline-none focus:ring-2 focus:ring-primary mt-1",children:[e.jsx("option",{value:"Home",children:"Home"}),e.jsx("option",{value:"Work",children:"Work"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Full Name *"}),e.jsx(L,{value:R.name,onChange:s=>$(r=>({...r,name:s.target.value})),placeholder:"John Doe",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Street Address *"}),e.jsx(L,{value:R.street_address,onChange:s=>$(r=>({...r,street_address:s.target.value})),placeholder:"123 Main Street",className:"mt-1",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:"City *"}),e.jsx(L,{value:R.city,onChange:s=>$(r=>({...r,city:s.target.value})),placeholder:"Edmonton",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Province *"}),e.jsx(L,{value:R.province,onChange:s=>$(r=>({...r,province:s.target.value})),placeholder:"Alberta",className:"mt-1",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(v,{children:"Postal Code *"}),e.jsx(L,{value:R.postal_code,onChange:s=>$(r=>({...r,postal_code:s.target.value})),placeholder:"T5A 0A1",className:"mt-1",required:!0})]}),e.jsxs("div",{children:[e.jsx(v,{children:"Phone Number *"}),e.jsx(L,{value:R.mobile_number,onChange:s=>$(r=>({...r,mobile_number:s.target.value})),placeholder:"+1 (825) 000-0000",className:"mt-1",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_default",checked:R.is_default===1,onChange:s=>$(r=>({...r,is_default:s.target.checked?1:0})),className:"h-4 w-4 text-primary rounded"}),e.jsx(v,{htmlFor:"is_default",className:"text-sm",children:"Set as default address"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(y,{onClick:$s,disabled:Oe,className:"flex-1 bg-gradient-to-r from-primary to-accent",children:Oe?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):"Save Address"}),e.jsx(y,{variant:"outline",onClick:()=>Z(!1),className:"flex-1",children:"Cancel"})]})]})]})})]}):e.jsx(Ce,{children:e.jsx("section",{className:"py-20",children:e.jsx("div",{className:"container text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-24 h-24 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(as,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h1",{className:"font-display text-3xl mb-4",children:"Login Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please login to continue with your checkout"}),e.jsx(y,{asChild:!0,size:"lg",className:"gap-2",children:e.jsxs(ne,{to:"/login?redirect=checkout",children:[e.jsx(as,{className:"h-4 w-4"}),"Login to Continue"]})})]})})})})};export{ua as default};
