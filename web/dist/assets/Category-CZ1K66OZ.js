import{p as U,r as i,U as q,E as D,F as X,h as Z,j as e,o as v,B as n,L as m,d as z,m as c,a as A,u as y,v as B,q as b,H as j,X as E,D as J,s as K,e as O,b as W}from"./index-DrzvgQSx.js";import{P as Y}from"./ProductCard-CAzaaPta.js";import{S as T}from"./slider-DJ7YiQGp.js";import{S as ee}from"./sliders-horizontal-BTKc8zQp.js";import{L as se}from"./layout-grid-2ZQb_xip.js";import{G as te}from"./grid-3x3-ZY2pglm3.js";import"./dialog-B_H0D0bM.js";import"./zap-BFNduXU6.js";import"./plus-CdXz1Jo6.js";import"./minus-BZn02uM1.js";import"./circle-check-big-Cc93Cm_Q.js";import"./award-CbtTaFep.js";import"./clock-B9_Mht4K.js";import"./index-BdQq_4o_.js";import"./index-DDpYfoMH.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=U("Badge",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}]]),ve=()=>{var L,R;const{auth:w}=i.useContext(q),{id:f,slug:ie}=D(),I=X(),[x,g]=i.useState(""),[t,h]=i.useState([0,500]),[C,S]=i.useState(!1),[N,k]=i.useState("grid"),[a,M]=i.useState(null),[$,V]=i.useState([]),[P,G]=i.useState([]),[H,F]=i.useState(!0),[r,o]=i.useState(null);i.useEffect(()=>{Q()},[f,w]);const Q=async()=>{F(!0);try{const l=(await Z.post("/get-store-products/",{cat_id:f,auth:w?"1":"0"})).data;if(!l.error&&l.data){const u=l.data;M(u.category),V(u.categories),G(u.products),o(null)}}catch(s){console.error("Failed to fetch products:",s)}finally{F(!1)}};i.useEffect(()=>{g(""),h([0,500]),o(null)},[f]);const p=P.filter(s=>{const l=s.name.toLowerCase().includes(x.toLowerCase()),u=s.price>=t[0]&&s.price<=t[1];let _=!0;return r&&(_=s.sub_category_id===r),l&&u&&_}),d=((L=a==null?void 0:a.sub_categories)==null?void 0:L.filter(s=>s.status==="active"))||[];return H?e.jsx(v,{children:e.jsx("div",{className:"container py-20 text-center",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 w-64 bg-muted rounded mx-auto mb-4"}),e.jsx("div",{className:"h-4 w-96 bg-muted rounded mx-auto"})]})})}):a?e.jsxs(v,{children:[e.jsxs("section",{className:"relative h-[50vh] min-h-[400px] flex items-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:z(a.image),alt:a.name,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-foreground/80 via-foreground/60 to-transparent"})]}),e.jsx("div",{className:"container relative z-10",children:e.jsxs(c.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-2xl",children:[e.jsxs(c.nav,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"flex items-center gap-2 text-card/70 text-sm mb-4",children:[e.jsx(m,{to:"/",className:"hover:text-card transition-colors",children:"Home"}),e.jsx(A,{className:"h-4 w-4"}),e.jsx(m,{to:"/shop",className:"hover:text-card transition-colors",children:"Shop"}),e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"text-card",children:a.name})]}),e.jsx(c.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.6},className:"font-display text-4xl md:text-5xl lg:text-6xl text-card mb-4",children:a.name}),e.jsx(c.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},className:"text-card/90 text-lg md:text-xl mb-6",children:a.description})]})})]}),e.jsx("section",{className:"py-12 md:py-16",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx(c.aside,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"hidden lg:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-32 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"font-medium mb-3 block",children:["Search in ",a.name]}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(B,{placeholder:"Search products...",value:x,onChange:s=>g(s.target.value),className:"pl-10"})]})]}),d.length>0&&e.jsxs("div",{children:[e.jsxs("label",{className:"font-medium mb-3 block flex items-center gap-2",children:[e.jsx("span",{children:"Sub Categories"}),r&&e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(m,{to:`/category/${a.id}/${a.slug}`,onClick:()=>o(null),className:`block px-3 py-2 rounded-lg text-sm transition-colors ${r?"hover:bg-muted text-muted-foreground hover:text-foreground":"bg-primary/10 text-primary font-medium"}`,children:["All ",a.name]}),d.map(s=>e.jsx("button",{onClick:()=>i.startTransition(()=>{I(`/subcategory/${s.id}/${s.slug}`)}),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${r===s.id?"bg-primary/10 text-primary font-medium":"hover:bg-muted text-muted-foreground hover:text-foreground"}`,children:s.name},`${s.id}-${b()}`))]}),r&&e.jsx("div",{className:"mt-2 px-3 py-1.5 bg-primary/5 rounded-lg",children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Showing products in subcategory"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium mb-3 block",children:"Price Range"}),e.jsx(T,{value:t,onValueChange:h,max:500,step:10,className:"mb-4"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:j(t[0])}),e.jsx("span",{className:"text-muted-foreground",children:j(t[1])})]}),(t[0]>0||t[1]<500)&&e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>h([0,500]),className:"mt-2 w-full text-xs",children:"Reset Price"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Products:"}),e.jsx("span",{className:"font-medium",children:P.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Filtered:"}),e.jsx("span",{className:"font-medium",children:p.length})]}),d.length>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subcategories:"}),e.jsx("span",{className:"font-medium",children:d.length})]})]})})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-muted-foreground",children:["Showing ",e.jsx("span",{className:"text-foreground font-medium",children:p.length})," products"]}),r&&e.jsxs(ae,{variant:"outline",className:"bg-primary/5 border-primary/20",children:[(R=d.find(s=>s.id===r))==null?void 0:R.name,e.jsx("button",{onClick:()=>o(null),className:"ml-2 hover:text-destructive",children:e.jsx(E,{className:"h-3 w-3"})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(n,{variant:"outline",className:"lg:hidden",onClick:()=>S(!C),children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),"Filters"]}),e.jsxs("div",{className:"hidden md:flex items-center gap-1 bg-muted rounded-lg p-1",children:[e.jsx("button",{onClick:()=>k("grid"),className:`p-2 rounded transition-colors ${N==="grid"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"}`,children:e.jsx(se,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k("compact"),className:`p-2 rounded transition-colors ${N==="compact"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"}`,children:e.jsx(te,{className:"h-4 w-4"})})]})]})]}),e.jsx(J,{children:C&&e.jsx(c.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"lg:hidden mb-6 overflow-hidden",children:e.jsxs("div",{className:"p-4 bg-muted rounded-xl space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Filters"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>S(!1),children:e.jsx(E,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(B,{placeholder:"Search products...",value:x,onChange:s=>g(s.target.value),className:"pl-10"})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Sub Categories"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{variant:r?"outline":"default",size:"sm",onClick:()=>o(null),className:"text-xs",children:"All"}),d.map(s=>e.jsx(n,{variant:r===s.id?"default":"outline",size:"sm",onClick:()=>o(s.id),className:"text-xs",children:s.name},`mobile-${s.id}`))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Price Range"}),e.jsx(T,{value:t,onValueChange:h,max:500,step:10,className:"mb-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:j(t[0])}),e.jsx("span",{children:j(t[1])})]})]})]})})}),p.length>0?e.jsx(c.div,{variants:K,initial:"hidden",animate:"visible",className:`grid gap-6 ${N==="grid"?"grid-cols-2 md:grid-cols-2 lg:grid-cols-3":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}`,children:p.map((s,l)=>e.jsx(c.div,{variants:O,children:e.jsx(Y,{product:s,index:l})},`${s.id}-${b()}`))}):e.jsx("div",{className:"text-center py-16 px-4",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(y,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"font-display text-xl mb-2",children:"No products found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:x||r||t[0]>0||t[1]<500?"Try adjusting your filters to find what you're looking for.":"This category doesn't have any products yet."}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[(x||r||t[0]>0||t[1]<500)&&e.jsx(n,{variant:"outline",onClick:()=>{g(""),o(null),h([0,500])},children:"Clear All Filters"}),e.jsx(n,{asChild:!0,children:e.jsx(m,{to:"/shop",children:"Browse All Products"})})]})]})})]})]})})}),$.length>0&&e.jsx(W,{children:e.jsx("section",{className:"py-12 bg-muted/30",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{className:"font-display text-2xl md:text-3xl mb-8 text-center",children:"Explore More Categories"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:$.filter(s=>s.id!==a.id).slice(0,4).map((s,l)=>e.jsx(c.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:l*.1},viewport:{once:!0},children:e.jsxs(m,{to:`/category/${s.id}/${s.slug}`,className:"group relative block aspect-[4/3] rounded-xl overflow-hidden",children:[e.jsx("img",{src:z(s.image),alt:s.name,className:"absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-foreground/80 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[e.jsx("h3",{className:"text-card font-display text-lg",children:s.name}),e.jsxs("p",{className:"text-card/70 text-sm mt-1",children:[s.product_count," products"]})]})]})},`${s.id}-${b()}`))})]})})})]}):e.jsx(v,{children:e.jsxs("div",{className:"container py-20 text-center",children:[e.jsx("h1",{className:"font-display text-3xl mb-4",children:"Category Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"The category you're looking for doesn't exist."}),e.jsx(n,{asChild:!0,children:e.jsx(m,{to:"/shop",children:"Browse All Products"})})]})})};export{ve as default};
