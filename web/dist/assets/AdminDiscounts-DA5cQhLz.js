import{aN as Qe,F as Ze,r as n,j as e,B as r,m as u,T as K,H as y,aJ as qe,u as Ge,v as Xe,at as je,au as ge,av as fe,ay as m,w as Ye,q as O,J as j,h as W,a6 as o,a2 as Ke,g as We}from"./index-DrzvgQSx.js";import{C as c,d,a as ee,b as se,c as te}from"./card-CSdj4VlM.js";import{T as es,a as ss,b as ts,c as x,d as as,e as h}from"./table-kDEzH9s1.js";import{D as Ne,a as ve,b as pe,c as be,f as ye}from"./dialog-B_H0D0bM.js";import{P as w}from"./progress-DNf4bHVP.js";import{T as rs,a as ls,b as z,c as I}from"./tabs-kkrfGa6s.js";import{S as is}from"./switch-BNZbPRLI.js";import{S as ae}from"./separator-DpYAwveS.js";import{L as we}from"./loader-circle-oXQTLidO.js";import{D as ns}from"./download-Oy2u3saE.js";import{P as M}from"./plus-CdXz1Jo6.js";import{U as cs}from"./users-BACZCDYD.js";import{T as ds}from"./trending-down-CdNysfqt.js";import{F as os}from"./filter-D38QoaQC.js";import{C as D}from"./copy-DaJ-tUD2.js";import{E as ms}from"./ellipsis-CiWrXJQx.js";import{E as V}from"./eye-DtInb1xn.js";import{P as R}from"./pen-DBLRQO7X.js";import{T as xs}from"./trash-2-DF_8SWob.js";import{Z as re}from"./zap-BFNduXU6.js";import{C as De}from"./clock-B9_Mht4K.js";import{C as hs}from"./calendar-Bh2qMya8.js";import{C}from"./circle-alert-D5MbGcH3.js";import{C as us}from"./circle-x-DMFlKDxD.js";import{C as js}from"./circle-check-big-Cc93Cm_Q.js";import{P as Ce}from"./percent-DSP3Ckz8.js";import{D as gs}from"./dollar-sign-CiHtqMiF.js";import"./index-DDpYfoMH.js";const Js=()=>{const{add_discount:S,edit_discount:B,delete_discount:H,view_discount:Se,activate_deactivate_discount:Te}=Qe(["add_discount","edit_discount","delete_discount","view_discount"]),J=Ze(),[T,ke]=n.useState(""),[g,Q]=n.useState([]),[a,Z]=n.useState(null),[Ue,k]=n.useState(!1),[_e,U]=n.useState(!1),[Ee,Ae]=n.useState("all"),[N,v]=n.useState("all"),[le,ie]=n.useState(!0),[ne,ce]=n.useState(!1),$e=s=>{var t,l,i,L;return{id:((t=s.id)==null?void 0:t.toString())||"",name:s.name||"",code:s.code||"",type:s.type||"percentage",value:s.value||0,status:s.status||"active",usage:{used:((l=s.usage)==null?void 0:l.used)||0,limit:((i=s.usage)==null?void 0:i.limit)||null,perCustomer:((L=s.usage)==null?void 0:L.perCustomer)||1},totalUsers:s.totalUsers||0,estimatedSavings:s.estimatedSavings||0,startDate:s.startDate||new Date().toISOString().split("T")[0],endDate:s.endDate||null,minPurchase:s.minPurchase||null,isActive:s.isActive||s.is_active||!1}},Fe=s=>{if(!s.endDate)return!1;const t=new Date;return new Date(s.endDate)<t},de=async()=>{try{ie(!0);const t=(await W.get("/get-discounts/")).data;if(!t.error&&t.data&&Array.isArray(t.data)){const l=t.data.map($e);Q(l)}else o.error(t.message||"Failed to load discounts")}catch(s){console.error("Error loading discounts:",s),o.error("Failed to load discounts")}finally{ie(!1)}};n.useEffect(()=>{if(!Se){n.startTransition(()=>J("/unauthorized"));return}de()},[]);const Pe=async()=>{try{ce(!0),await de(),o.success("Discounts refreshed successfully")}catch(s){console.error("Error refreshing discounts:",s),o.error("Failed to refresh discounts")}finally{ce(!1)}},_=g.filter(s=>{const t=s.name.toLowerCase().includes(T.toLowerCase())||s.code.toLowerCase().includes(T.toLowerCase());return N==="all"?t:N==="active"?t&&s.status==="active":N==="expired"?t&&s.status==="expired":N==="scheduled"?t&&s.status==="scheduled":N==="disabled"?t&&s.status==="disabled":t}),oe=g.filter(s=>s.status==="active").length,Le=g.reduce((s,t)=>s+t.totalUsers,0),Oe=g.reduce((s,t)=>s+t.estimatedSavings,0),ze=g.reduce((s,t)=>s+t.usage.used,0),q=g.filter(s=>s.status==="active"),Ie=q.reduce((s,t)=>s+t.totalUsers,0),Me=q.reduce((s,t)=>s+t.estimatedSavings,0),E=()=>{n.startTransition(()=>J("/admin/discount/new"))},A=s=>{n.startTransition(()=>J(`/admin/discount/${s.id}/${Ke(s.name)}`))},$=s=>{Z(s),U(!0)},Ve=s=>{Z(s),k(!0)},Re=async()=>{if(H&&a)try{const t=(await W.post("/delete-discount/",{id:a.id})).data;t.error?o.error(t.message||"Failed to delete discount"):(o.success(`${a.name} has been deleted successfully.`),Q(l=>l.filter(i=>i.id!==a.id)))}catch(s){console.error("Error deleting discount:",s),o.error("Failed to delete discount")}finally{k(!1),Z(null)}},me=async s=>{if(Te)try{const l=(await W.post("/toggle-discount/",{id:s.id})).data;if(!l.error&&l.data){const i=l.data;Q(Je=>Je.map(Y=>Y.id===s.id?{...Y,isActive:i.is_active,status:i.status||(i.is_active?"active":"disabled")}:Y));const L=i.is_active?"activated":"deactivated";o.success(`${s.name} has been ${L}`)}else o.error(l.message||"Failed to update discount status")}catch(t){console.error("Error toggling discount status:",t),o.error("Failed to update discount status")}},xe=s=>Fe(s)?!1:s.status==="active"||s.status==="disabled",Be=s=>s.status==="active"?{text:"Deactivate",icon:e.jsx(C,{className:"h-4 w-4 mr-2"})}:s.status==="disabled"?{text:"Activate",icon:e.jsx(re,{className:"h-4 w-4 mr-2"})}:{text:"",icon:null},p=s=>{navigator.clipboard.writeText(s),o.success(`Discount code ${s} copied to clipboard`)},he=s=>{switch(s){case"active":return e.jsxs(j,{className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(js,{className:"h-3 w-3 mr-1"})," Active"]});case"expired":return e.jsxs(j,{className:"bg-gray-100 text-gray-800 border-gray-200",children:[e.jsx(us,{className:"h-3 w-3 mr-1"})," Expired"]});case"scheduled":return e.jsxs(j,{className:"bg-blue-100 text-blue-800 border-blue-200",children:[e.jsx(De,{className:"h-3 w-3 mr-1"})," Scheduled"]});case"disabled":return e.jsxs(j,{className:"bg-red-100 text-red-800 border-red-200",children:[e.jsx(C,{className:"h-3 w-3 mr-1"})," Disabled"]});default:return e.jsx(j,{variant:"outline",children:s})}},He=s=>{switch(s){case"percentage":return e.jsx(Ce,{className:"h-4 w-4 text-blue-500"});case"fixed":return e.jsx(gs,{className:"h-4 w-4 text-green-500"});case"free_shipping":return e.jsx(We,{className:"h-4 w-4 text-purple-500"});default:return e.jsx(Ce,{className:"h-4 w-4 text-blue-500"})}},b=s=>{switch(s.type){case"percentage":return`${s.value}% OFF`;case"fixed":return`$${s.value} OFF`;case"free_shipping":return"FREE SHIPPING";default:return`${s.value}% OFF`}},f=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A",G=s=>{if(!s)return null;const t=new Date,l=new Date(s);if(isNaN(l.getTime()))return null;const i=l.getTime()-t.getTime();return Math.ceil(i/(1e3*60*60*24))},ue=_,X=_.filter(s=>s.status==="active"),F=_.filter(s=>s.status==="scheduled"),P=_.filter(s=>s.status==="expired");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"font-display text-2xl md:text-3xl mb-2",children:"Discounts & Promotions"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage discount codes for your store"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",className:"gap-2",onClick:Pe,disabled:ne||le,children:[ne?e.jsx(we,{className:"h-4 w-4 animate-spin"}):e.jsx(ns,{className:"h-4 w-4"}),"Refresh"]}),S&&e.jsxs(r,{onClick:E,className:"gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Create Discount"]})]})]}),le?e.jsx(c,{className:"py-12 text-center",children:e.jsxs(d,{children:[e.jsx(we,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),e.jsx("p",{children:"Loading discounts..."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(c,{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 border-blue-200",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Active Discounts"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:oe}),e.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:[q.length," currently running"]})]}),e.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:e.jsx(K,{className:"h-6 w-6 text-blue-600"})})]}),e.jsx(w,{value:100,className:"h-1 mt-4 bg-blue-200"})]})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(c,{className:"bg-gradient-to-br from-green-50 to-green-100/50 border-green-200",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Total Users"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:Le.toLocaleString()}),e.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[Ie.toLocaleString()," active users"]})]}),e.jsx("div",{className:"p-3 rounded-full bg-green-100",children:e.jsx(cs,{className:"h-6 w-6 text-green-600"})})]}),e.jsx(w,{value:85,className:"h-1 mt-4 bg-green-200"})]})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(c,{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 border-purple-200",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Estimated Savings"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:y(Oe)}),e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:[y(Me)," active savings"]})]}),e.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:e.jsx(ds,{className:"h-6 w-6 text-purple-600"})})]}),e.jsx(w,{value:72,className:"h-1 mt-4 bg-purple-200"})]})})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(c,{className:"bg-gradient-to-br from-orange-50 to-orange-100/50 border-orange-200",children:e.jsxs(d,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Total Usage"}),e.jsx("h3",{className:"text-3xl font-bold mt-2",children:ze.toLocaleString()}),e.jsx("p",{className:"text-sm text-orange-600 mt-1",children:"Discount codes redeemed"})]}),e.jsx("div",{className:"p-3 rounded-full bg-orange-100",children:e.jsx(qe,{className:"h-6 w-6 text-orange-600"})})]}),e.jsx(w,{value:45,className:"h-1 mt-4 bg-orange-200"})]})})})]}),e.jsxs(rs,{value:Ee,onValueChange:Ae,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs(ls,{children:[e.jsxs(z,{value:"all",children:["All Discounts (",g.length,")"]}),e.jsxs(z,{value:"active",children:["Active (",oe,")"]}),e.jsxs(z,{value:"scheduled",children:["Scheduled (",F.length,")"]}),e.jsxs(z,{value:"expired",children:["Expired (",P.length,")"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(Ge,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Xe,{placeholder:"Search discounts...",value:T,onChange:s=>ke(s.target.value),className:"pl-9"})]}),e.jsxs(je,{children:[e.jsx(ge,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"gap-2",children:[e.jsx(os,{className:"h-4 w-4"}),"Filter"]})}),e.jsxs(fe,{align:"end",children:[e.jsx(m,{onClick:()=>v("all"),children:"All Status"}),e.jsx(m,{onClick:()=>v("active"),children:"Active Only"}),e.jsx(m,{onClick:()=>v("expired"),children:"Expired Only"}),e.jsx(m,{onClick:()=>v("scheduled"),children:"Scheduled Only"}),e.jsx(m,{onClick:()=>v("disabled"),children:"Disabled Only"})]})]})]})]}),e.jsx(I,{value:"all",className:"space-y-4",children:ue.length===0?e.jsx(c,{children:e.jsxs(d,{className:"py-12 text-center",children:[e.jsx(K,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No discounts found"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:T?"Try a different search term":"Create your first discount code to get started"}),S&&e.jsxs(r,{onClick:E,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create Your First Discount"]})]})}):e.jsx(c,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(es,{children:[e.jsx(ss,{children:e.jsxs(ts,{children:[e.jsx(x,{children:"Discount"}),e.jsx(x,{children:"Code"}),e.jsx(x,{children:"Type"}),e.jsx(x,{children:"Status"}),e.jsx(x,{children:"Usage"}),e.jsx(x,{children:"Total Users"}),e.jsx(x,{children:"Savings"}),e.jsx(x,{children:"Valid Until"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(as,{children:ue.map((s,t)=>{const l=xe(s),i=Be(s);return e.jsxs(u.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},className:"hover:bg-muted/50",children:[e.jsxs(h,{children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.minPurchase?`Min. $${s.minPurchase}`:"No minimum"})]}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded font-mono",children:s.code}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>p(s.code),children:e.jsx(D,{className:"h-3 w-3"})})]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[He(s.type),e.jsx("span",{className:"font-medium",children:b(s)})]})}),e.jsx(h,{children:he(s.status)}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:s.usage.used}),e.jsx("span",{className:"text-muted-foreground",children:s.usage.limit?`/ ${s.usage.limit}`:"∞"})]}),e.jsx(w,{value:s.usage.limit?s.usage.used/s.usage.limit*100:0,className:"h-1"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.usage.perCustomer," per customer"]})]})}),e.jsxs(h,{children:[e.jsx("div",{className:"font-medium",children:s.totalUsers}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.usage.used>0?`${Math.round(s.totalUsers/s.usage.used*100)}% retention`:"No usage yet"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"font-medium",children:y(s.estimatedSavings)}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Avg. ",y(s.totalUsers>0?Math.round(s.estimatedSavings/s.totalUsers):0),"/user"]})]}),e.jsx(h,{children:s.endDate?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:f(s.endDate)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:G(s.endDate)!==null&&e.jsxs("span",{className:Ye("font-medium",G(s.endDate)<7?"text-red-600":"text-green-600"),children:[G(s.endDate)," days left"]})})]}):e.jsx("span",{className:"text-muted-foreground",children:"No end date"})}),e.jsx(h,{className:"text-right",children:e.jsxs(je,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(ms,{className:"h-4 w-4"})})}),e.jsxs(fe,{align:"end",children:[e.jsxs(m,{onClick:()=>$(s),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"View Details"]}),B&&e.jsxs(m,{onClick:()=>A(s),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Edit"]}),l&&e.jsxs(m,{onClick:()=>me(s),children:[i.icon,i.text]}),e.jsxs(m,{onClick:()=>p(s.code),children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Copy Code"]}),H&&e.jsxs(m,{onClick:()=>Ve(s),className:"text-destructive",children:[e.jsx(xs,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},`${s.id}-${O()}`)})})]})})})}),e.jsx(I,{value:"active",children:e.jsxs(c,{children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-green-500"}),"Active Discounts (",X.length,")"]}),e.jsx(te,{children:"Currently running promotions and discounts"})]}),e.jsx(d,{children:X.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(re,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No active discounts at the moment"}),S&&e.jsxs(r,{variant:"outline",className:"mt-4",onClick:E,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Create a New Discount"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:X.map((s,t)=>{const l=xe(s);return e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:t*.1},children:e.jsxs(c,{className:"overflow-hidden hover:shadow-lg transition-shadow border-green-200",children:[e.jsxs("div",{className:"p-5 bg-gradient-to-r from-green-50 to-green-100/50 border-b border-green-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b(s)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{className:"bg-green-100 text-green-800 border-green-200",children:"Active"}),l&&e.jsx(is,{checked:s.isActive,onCheckedChange:()=>me(s)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded font-mono flex-1",children:s.code}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>p(s.code),children:e.jsx(D,{className:"h-4 w-4"})})]})]}),e.jsx(d,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Used"}),e.jsxs("div",{className:"font-semibold",children:[s.usage.used," / ",s.usage.limit||"∞"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Users"}),e.jsx("div",{className:"font-semibold",children:s.totalUsers})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Savings"}),e.jsx("div",{className:"font-semibold",children:y(s.estimatedSavings)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Expires"}),e.jsx("div",{className:"font-semibold",children:s.endDate?f(s.endDate):"Never"})]})]}),e.jsx(ae,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>$(s),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"View"]}),B&&e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>A(s),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})})]})},`${s.id}-${O()}`)})})})]})}),e.jsx(I,{value:"scheduled",children:e.jsxs(c,{children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5 text-blue-500"}),"Scheduled Discounts (",F.length,")"]}),e.jsx(te,{children:"Upcoming promotions scheduled to start in the future"})]}),e.jsx(d,{children:F.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(hs,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No scheduled discounts at the moment"}),S&&e.jsxs(r,{variant:"outline",className:"mt-4",onClick:E,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Schedule a New Discount"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F.map((s,t)=>e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:t*.1},children:e.jsxs(c,{className:"overflow-hidden hover:shadow-lg transition-shadow border-blue-200",children:[e.jsxs("div",{className:"p-5 bg-gradient-to-r from-blue-50 to-blue-100/50 border-b border-blue-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b(s)})]}),e.jsx(j,{className:"bg-blue-100 text-blue-800 border-blue-200",children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded font-mono flex-1",children:s.code}),e.jsx(r,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>p(s.code),children:e.jsx(D,{className:"h-4 w-4"})})]})]}),e.jsx(d,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Starts"}),e.jsx("div",{className:"font-semibold",children:f(s.startDate)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ends"}),e.jsx("div",{className:"font-semibold",children:s.endDate?f(s.endDate):"Never"})]})]}),e.jsx(ae,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>$(s),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"View"]}),B&&e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>A(s),children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})})]})},`${s.id}-${O()}`))})})]})}),e.jsx(I,{value:"expired",children:e.jsxs(c,{children:[e.jsxs(ee,{children:[e.jsxs(se,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-red-500"}),"Expired Discounts (",P.length,")"]}),e.jsx(te,{children:"Past promotions and their performance metrics"})]}),e.jsx(d,{children:P.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No expired discounts found"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map((s,t)=>e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:t*.1},children:e.jsxs(c,{className:"overflow-hidden hover:shadow-lg transition-shadow border-gray-200",children:[e.jsxs("div",{className:"p-5 bg-gradient-to-r from-gray-50 to-gray-100/50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b(s)})]}),e.jsx(j,{className:"bg-gray-100 text-gray-800 border-gray-200",children:"Expired"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("code",{className:"text-sm bg-gray-100 text-gray-800 px-2 py-1 rounded font-mono flex-1",children:s.code})})]}),e.jsx(d,{className:"p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Usage"}),e.jsx("div",{className:"font-semibold",children:s.usage.used})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"}),e.jsx("div",{className:"font-semibold",children:s.totalUsers})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Savings"}),e.jsxs("div",{className:"font-semibold",children:["$",s.estimatedSavings.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Ended"}),e.jsx("div",{className:"font-semibold",children:s.endDate?f(s.endDate):"N/A"})]})]}),e.jsx(ae,{}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(r,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>$(s),children:[e.jsx(V,{className:"h-4 w-4 mr-2"}),"View Details"]})})]})})]})},`${s.id}-${O()}`))})})]})})]})]}),e.jsx(Ne,{open:_e,onOpenChange:U,children:e.jsxs(ve,{className:"max-w-2xl",children:[e.jsx(pe,{children:e.jsxs(be,{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-5 w-5"}),"Discount Details"]})}),a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:a.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"text-lg font-mono bg-background px-3 py-1 rounded",children:a.code}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(a.code),children:e.jsx(D,{className:"h-4 w-4"})})]})]}),he(a.status)]}),e.jsx("div",{className:"text-lg font-semibold text-primary",children:b(a)})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.usage.used}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Times Used"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.totalUsers}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Users"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["$",a.estimatedSavings.toLocaleString()]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Savings"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:a.usage.limit||"∞"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Usage Limit"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Start Date:"}),e.jsx("span",{className:"font-medium",children:f(a.startDate)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"End Date:"}),e.jsx("span",{className:"font-medium",children:a.endDate?f(a.endDate):"No end date"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Minimum Purchase:"}),e.jsx("span",{className:"font-medium",children:a.minPurchase?`$${a.minPurchase}`:"None"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Usage Per Customer:"}),e.jsx("span",{className:"font-medium",children:a.usage.perCustomer})]})]})]}),e.jsxs(ye,{children:[e.jsx(r,{variant:"outline",onClick:()=>U(!1),children:"Close"}),e.jsxs(r,{onClick:()=>{U(!1),a&&A(a)},children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Edit Discount"]})]})]})}),H&&e.jsx(Ne,{open:Ue,onOpenChange:k,children:e.jsxs(ve,{children:[e.jsx(pe,{children:e.jsx(be,{children:"Delete Discount"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[e.jsx(C,{className:"h-5 w-5"}),e.jsx("p",{children:"Are you sure you want to delete this discount?"})]}),a&&e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("code",{className:"text-sm text-muted-foreground",children:a.code}),e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["This discount has been used ",a.usage.used," times by ",a.totalUsers," users."]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This action cannot be undone. All usage data will be permanently deleted."})]}),e.jsxs(ye,{children:[e.jsx(r,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(r,{variant:"destructive",onClick:Re,children:"Delete Discount"})]})]})})]})};export{Js as default};
